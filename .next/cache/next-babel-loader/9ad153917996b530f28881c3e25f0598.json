{"ast":null,"code":"import * as satellite from \"satellite.js\";\nimport { getSatelliteCoverageRadius } from \"./coverage\";\nimport { EARTH_MASS_KG, EARTH_RADIUS_M, G } from \"./constants\";\nexport function getSatellitePosition(sat) {\n  var time = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Date();\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n    _ref$elevation = _ref.elevation,\n    elevation = _ref$elevation === void 0 ? null : _ref$elevation;\n  var positionAndVelocity = satellite.propagate(sat.satrec, time);\n  if (!positionAndVelocity.position) {\n    return;\n  }\n  var positionGd = satellite.eciToGeodetic(positionAndVelocity.position, satellite.gstime(time));\n  var lng = positionGd.longitude * 180 / Math.PI;\n  var lat = positionGd.latitude * 180 / Math.PI;\n  var height = positionGd.height;\n  var coverageRadius = elevation != null ? getSatelliteCoverageRadius(height, elevation) : null;\n  return {\n    sat: sat,\n    lng: lng,\n    lat: lat,\n    height: height,\n    coverageRadius: coverageRadius\n  };\n}\nexport function getSatellitePositions(sats) {\n  var time = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Date();\n  var _ref2 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n    _ref2$elevation = _ref2.elevation,\n    elevation = _ref2$elevation === void 0 ? null : _ref2$elevation;\n  return sats.map(function (sat) {\n    return getSatellitePosition(sat, time, {\n      elevation: elevation\n    });\n  }).filter(function (x) {\n    return x;\n  });\n}\nexport function orbitalPeriod(height) {\n  // https://www.physicsclassroom.com/class/circles/Lesson-4/Mathematics-of-Satellite-Motion\n  var R = EARTH_RADIUS_M + height * 1000;\n  return Math.sqrt(4 * Math.pow(Math.PI, 2) / (G * EARTH_MASS_KG) * Math.pow(R, 3));\n}\nexport function meanMotionRadPerMinute(height) {\n  var seconds = orbitalPeriod(height);\n  return 2 * Math.PI / (seconds / 60);\n}","map":null,"metadata":{},"sourceType":"module"}