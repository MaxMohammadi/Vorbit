{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/maxmohammadi/Vorbit-Space/src/components/SatSim.tsx\",\n  _s = $RefreshSig$();\nvar __jsx = React.createElement;\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, \"_invoke\", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var methodName = context.method, method = delegate.iterator[methodName]; if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel; var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) keys.push(key); return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, \"catch\": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React from \"react\";\nimport { loadStarlink, generateStarlink } from \"../starlink\";\nimport _ from \"lodash\";\nimport { assocIn, getIn } from \"icepick\";\nimport { startTimer } from \"../timer\";\nimport { getSatellitePositions } from \"../satellites\";\nimport { getCellsForResolution, computeCoverage, computeCoverageAtMoment, makeCoverage } from \"../coverage\";\nimport Globe from \"globe.gl\";\nimport { Setting, SettingNumber, SettingRange, SettingsSection, SettingsLayerSection, SettingsSectionHeader, SettingsButton, SettingsRow, SettingSelect } from \"./settings\";\nimport satelliteLayer from \"../layers/satellite\";\nimport laserLayer, { laserLinksForSatellites } from \"../layers/laser\";\nimport coverageLayer from \"../layers/coverage\";\nimport gatewayLayer, { getGateways, getGatewaysIndex } from \"../layers/gateway\";\nimport routingLayer from \"../layers/routing\";\nimport { computeShortestPath } from \"../routing\";\nvar layers = [satelliteLayer, coverageLayer, gatewayLayer, laserLayer, routingLayer];\nvar GENERATED_PRESETS = [{\n  name: \"Starlink - Original\",\n  value: [{\n    orbitalPlanes: 32,\n    satellitesPerOrbitalPlane: 50,\n    altitude: 1100,\n    inclination: 53\n  }]\n}, {\n  name: \"Starlink - Nov 2018\",\n  value: [{\n    orbitalPlanes: 24,\n    satellitesPerOrbitalPlane: 66,\n    altitude: 550,\n    inclination: 53\n  }]\n}, {\n  name: \"Starlink - Dec 2019\",\n  value: [{\n    orbitalPlanes: 72,\n    satellitesPerOrbitalPlane: 22,\n    altitude: 550,\n    inclination: 53\n  }]\n}];\nvar DEFAULT_CONFIG = {\n  multiplier: 50,\n  elevation: 40,\n  satellitesType: \"starlink\",\n  layers: {},\n  generated: GENERATED_PRESETS[1].value\n};\n\n// settings managed outside of config\nvar _multiplier;\nvar elevation;\nvar LAYERS_MAP = {};\nfor (var _i = 0, _layers = layers; _i < _layers.length; _i++) {\n  var layer = _layers[_i];\n  LAYERS_MAP[layer.key] = layer;\n  DEFAULT_CONFIG.layers[layer.key] = _objectSpread({}, layer.defaultConfig);\n}\nfunction getConfigFromURL() {\n  try {\n    return JSON.parse(atob(window.location.hash.slice(1)));\n  } catch (e) {\n    return null;\n  }\n}\nfunction setConfigInURL(config) {\n  window.location.hash = \"#\" + btoa(JSON.stringify(config));\n}\nexport default function SatSim() {\n  _s();\n  var _this = this;\n  var ref = React.useRef(null);\n  var _React$useState = React.useState(null),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    globe = _React$useState2[0],\n    setGlobe = _React$useState2[1];\n  var _React$useState3 = React.useState(getConfigFromURL() || DEFAULT_CONFIG),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    config = _React$useState4[0],\n    setConfigState = _React$useState4[1];\n  var setConfig = function setConfig(keyPath, value) {\n    var newConfig = assocIn(config, keyPath, value);\n    setConfigState(newConfig);\n    setConfigInURL(newConfig);\n  };\n  var getConfig = function getConfig(keyPath) {\n    return getIn(config, keyPath);\n  };\n  var inputConfig = function inputConfig(keyPath) {\n    return {\n      value: getConfig(keyPath),\n      onChange: function onChange(e) {\n        return setConfig(keyPath, e.target.value);\n      }\n    };\n  };\n  var checkboxConfig = function checkboxConfig(keyPath) {\n    return {\n      checked: getConfig(keyPath),\n      onChange: function onChange(e) {\n        return setConfig(keyPath, e.target.checked);\n      }\n    };\n  };\n  React.useEffect(function () {\n    var globe = init(ref.current);\n    setGlobe({\n      globe: globe\n    });\n  }, []);\n  var _React$useState5 = React.useState(null),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    computedConfig = _React$useState6[0],\n    setComputedConfig = _React$useState6[1];\n  React.useEffect(function () {\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var satellites;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            satellites = [];\n            if (!(config.satellitesType === \"starlink\")) {\n              _context.next = 7;\n              break;\n            }\n            _context.next = 4;\n            return loadStarlink();\n          case 4:\n            satellites = _context.sent;\n            _context.next = 8;\n            break;\n          case 7:\n            if (config.satellitesType === \"generated\") {\n              satellites = generateStarlink(config.generated);\n            }\n          case 8:\n            setComputedConfig(_objectSpread(_objectSpread({}, config), {}, {\n              satellites: satellites\n            }));\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }))();\n  }, [config]);\n  React.useEffect(function () {\n    if (globe && computedConfig) {\n      globe.globe.config = computedConfig;\n      return update(globe.globe);\n    }\n  }, [globe, computedConfig]);\n\n  // these are stored separately for performance reasons\n  var _React$useState7 = React.useState(DEFAULT_CONFIG.multiplier),\n    _React$useState8 = _slicedToArray(_React$useState7, 2),\n    multiplier_ = _React$useState8[0],\n    setMultiplier = _React$useState8[1];\n  _multiplier = multiplier_;\n  var _React$useState9 = React.useState(DEFAULT_CONFIG.elevation),\n    _React$useState10 = _slicedToArray(_React$useState9, 2),\n    elevation_ = _React$useState10[0],\n    setElevation = _React$useState10[1];\n  elevation = elevation_;\n  var setRealTime = function setRealTime() {\n    setMultiplier(1);\n    globe.date = null;\n    setConfig([\"nonce\"], Date.now());\n  };\n  var _React$useState11 = React.useState(window.innerWidth > 1000),\n    _React$useState12 = _slicedToArray(_React$useState11, 2),\n    settingsVisible = _React$useState12[0],\n    setSettingsVisible = _React$useState12[1];\n  var settingsProps = {\n    config: config,\n    inputConfig: inputConfig,\n    checkboxConfig: checkboxConfig,\n    setConfig: setConfig,\n    getConfig: getConfig\n  };\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"absolute top-0 left-0 bottom-0 right-0 flex flex-col items-center bg-black\",\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    className: \"absolute bottom-0 left-0 text-white p-2\",\n    id: \"time\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    className: \"absolute bottom-0 right-0 text-white p-2\",\n    id: \"fps\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    className: \"absolute bottom-0 right-0 left-0 text-white text-center p-2\",\n    id: \"route\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }\n  }), __jsx(\"div\", {\n    className: \"absolute top-0 right-0 text-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }\n  }, \"SatSim v1.0 \", __jsx(\"a\", {\n    href: \"https://github.com/tlrobinson/satsim\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 21\n    }\n  }, \"(src)\")), settingsVisible ? __jsx(\"div\", {\n    className: \"absolute top-0 left-0 text-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 9\n    }\n  }, __jsx(SettingsSectionHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 11\n    }\n  }, \"Satellites\", __jsx(\"span\", {\n    className: \"flex-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }\n  }), __jsx(SettingsButton, {\n    onClick: function onClick() {\n      return setSettingsVisible(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }\n  }, \"\\xD7\")), __jsx(SettingsSection, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 11\n    }\n  }, __jsx(SettingsRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }\n  }, __jsx(SettingSelect, _extends({}, inputConfig([\"satellitesType\"]), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 15\n    }\n  }), __jsx(\"option\", {\n    value: \"starlink\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 17\n    }\n  }, \"Starlink (Live)\"), __jsx(\"option\", {\n    value: \"generated\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 17\n    }\n  }, \"Generated\")), getConfig([\"satellitesType\"]) === \"generated\" && __jsx(SettingSelect, {\n    className: \"ml-2\",\n    value: _.findIndex(GENERATED_PRESETS, function (_ref2) {\n      var value = _ref2.value;\n      return _.isEqual(value, config.generated);\n    }),\n    onChange: function onChange(e) {\n      return setConfig([\"generated\"], GENERATED_PRESETS[e.target.value].value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 17\n    }\n  }, __jsx(\"option\", {\n    disabled: true,\n    value: -1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 19\n    }\n  }, \"Select a preset...\"), GENERATED_PRESETS.map(function (_ref3, index) {\n    var name = _ref3.name;\n    return __jsx(\"option\", {\n      value: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 21\n      }\n    }, name);\n  }))), getConfig([\"satellitesType\"]) === \"generated\" && __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 15\n    }\n  }, getConfig([\"generated\"]).map(function (shell, shellIndex, shells) {\n    return __jsx(\"div\", {\n      className: \"border-b border-white mt-1 mb-1 pb-1\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 19\n      }\n    }, __jsx(\"div\", {\n      className: \"flex items-center\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 21\n      }\n    }, __jsx(\"strong\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 23\n      }\n    }, \"Orbital Shell \", shellIndex + 1), __jsx(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 23\n      }\n    }, \" – \", shell.orbitalPlanes * shell.satellitesPerOrbitalPlane, \" \", \"satellites\"), __jsx(\"span\", {\n      className: \"flex-1\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 23\n      }\n    }), shells.length > 1 && __jsx(SettingsButton, {\n      onClick: function onClick() {\n        return setConfig([\"generated\"], [].concat(_toConsumableArray(shells.slice(0, shellIndex)), _toConsumableArray(shells.slice(shellIndex + 1))));\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 25\n      }\n    }, \"\\xD7\"), shellIndex === shells.length - 1 && __jsx(SettingsButton, {\n      onClick: function onClick() {\n        return setConfig([\"generated\"], [].concat(_toConsumableArray(shells), [shell]));\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 25\n      }\n    }, \"+\")), __jsx(Setting, {\n      title: \"Orbital Planes\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 21\n      }\n    }, __jsx(SettingNumber, _extends({\n      min: 1,\n      max: 100\n    }, inputConfig([\"generated\", shellIndex, \"orbitalPlanes\"]), {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 23\n      }\n    }))), __jsx(Setting, {\n      title: \"Satellites per Plane\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 21\n      }\n    }, __jsx(SettingNumber, _extends({\n      min: 1,\n      max: 100\n    }, inputConfig([\"generated\", shellIndex, \"satellitesPerOrbitalPlane\"]), {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 23\n      }\n    }))), __jsx(Setting, {\n      title: \"Inclination\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 21\n      }\n    }, __jsx(SettingNumber, _extends({\n      min: 0,\n      max: 360\n    }, inputConfig([\"generated\", shellIndex, \"inclination\"]), {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 23\n      }\n    }))), __jsx(Setting, {\n      title: \"Altitude\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 21\n      }\n    }, __jsx(SettingNumber, _extends({\n      min: 1,\n      max: 1000\n    }, inputConfig([\"generated\", shellIndex, \"altitude\"]), {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 23\n      }\n    }))));\n  })), __jsx(Setting, {\n    title: \"Min Elevation\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 13\n    }\n  }, __jsx(SettingRange, {\n    min: 0,\n    max: 90,\n    value: elevation,\n    onChange: function onChange(e) {\n      return setElevation(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 15\n    }\n  }), __jsx(\"span\", {\n    className: \"ml-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 15\n    }\n  }, elevation, \"\\xB0\"))), __jsx(SettingsSectionHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 11\n    }\n  }, \"Time\"), __jsx(SettingsSection, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 11\n    }\n  }, __jsx(SettingsRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 13\n    }\n  }, __jsx(SettingRange, {\n    min: -400,\n    max: 400,\n    value: _multiplier,\n    onChange: function onChange(e) {\n      return setMultiplier(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 15\n    }\n  }), __jsx(\"span\", {\n    className: \"ml-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 15\n    }\n  }, _multiplier, \"\\xD7\"), __jsx(\"span\", {\n    className: \"flex-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 15\n    }\n  }), __jsx(SettingsButton, {\n    onClick: setRealTime,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 15\n    }\n  }, \"Real-time\"))), __jsx(SettingsSectionHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 11\n    }\n  }, \"Layers\"), layers.filter(function (layer) {\n    return typeof layer.canEnable !== \"function\" || layer.canEnable(config);\n  }).map(function (layer) {\n    return __jsx(SettingsLayerSection, {\n      layer: layer,\n      config: config,\n      setConfig: setConfig,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 15\n      }\n    }, typeof layer.renderSettings === \"function\" && layer.renderSettings(settingsProps));\n  })) : __jsx(\"div\", {\n    className: \"absolute top-0 left-0 text-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 9\n    }\n  }, __jsx(SettingsSectionHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 11\n    }\n  }, __jsx(SettingsButton, {\n    onClick: function onClick() {\n      return setSettingsVisible(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 13\n    }\n  }, \"Settings\"))));\n}\n_s(SatSim, \"U4I5095PH9HClrBpgP4y1BpAhO4=\");\n_c = SatSim;\nfunction init(element) {\n  var globe = Globe();\n  globe(element).globeImageUrl(\"//unpkg.com/three-globe/example/img/earth-dark.jpg\")\n  // .bumpImageUrl(\"//unpkg.com/three-globe/example/img/earth-topology.png\")\n  // .backgroundImageUrl(\"//unpkg.com/three-globe/example/img/night-sky.png\")\n  .pointOfView({\n    lat: 38,\n    lng: -100,\n    altitude: 1.5\n  }, 1000).customThreeObject(function (d, globeRadius) {\n    globe.radius = globeRadius;\n    if (LAYERS_MAP[d.type]) {\n      return LAYERS_MAP[d.type].create(globe, d, globeRadius);\n    } else {\n      console.warn(\"Unknown type\", d.type);\n    }\n  }).customThreeObjectUpdate(function (obj, d, globeRadius) {\n    globe.radius = globeRadius;\n    if (LAYERS_MAP[d.type]) {\n      return LAYERS_MAP[d.type].update(globe, d, obj, globeRadius);\n    }\n  });\n  return globe;\n}\nfunction update(globe) {\n  var config = globe.config;\n  var satellites = config.satellites;\n  globe.satellites = satellites;\n  var resolution = config.layers.coverage.resolution;\n  var coverageAverageEnabled = config.layers.coverage.enabled && config.layers.coverage.type === \"average\";\n  var routingEnabled = config.layers.routing.enabled;\n  var routingLasersEnabled = config.layers.routing.use_laser_links;\n  var laserEnabled = config.layers.laser.enabled;\n  var coverageTotal;\n  if (coverageAverageEnabled) {\n    globe.cells = getCellsForResolution(resolution);\n    globe.coverage = computeCoverage({\n      resolution: resolution,\n      satellites: satellites\n    });\n    coverageTotal = makeCoverage(globe.cells);\n  }\n  globe.laserLinks = [];\n  if (laserEnabled || routingEnabled && routingLasersEnabled) {\n    globe.laserLinks = laserLinksForSatellites(satellites, config.layers.laser);\n  }\n  globe.gateways = getGateways(config.layers.gateway);\n  globe.gatewaysIndex = getGatewaysIndex(globe.gateways);\n  var enabledLayers = layers.filter(function (layer) {\n    return config.layers[layer.key].enabled;\n  });\n  var customLayerData = enabledLayers.flatMap(function (layer) {\n    return layer.objects(globe);\n  });\n  globe.customLayerData(customLayerData);\n  var ticks = 0;\n  var last;\n  var avgFps;\n  var SMOOTHING = 0.95;\n  function update(date) {\n    ticks++;\n    globe.config.elevation = elevation;\n    var positions = getSatellitePositions(satellites, date, {\n      elevation: globe.config.elevation\n    });\n    globe.positions = positions;\n    globe.date = date;\n    var satellitesByCell, cellsBySatellite;\n    if (coverageAverageEnabled || routingEnabled) {\n      var _computeCoverageAtMom = computeCoverageAtMoment({\n        elevation: globe.config.elevation,\n        resolution: resolution,\n        positions: positions\n      });\n      satellitesByCell = _computeCoverageAtMom.satellitesByCell;\n      cellsBySatellite = _computeCoverageAtMom.cellsBySatellite;\n    }\n    globe.coverage = {};\n    if (coverageAverageEnabled) {\n      for (var _i2 = 0, _Object$keys = Object.keys(coverageTotal); _i2 < _Object$keys.length; _i2++) {\n        var cell = _Object$keys[_i2];\n        coverageTotal[cell] += satellitesByCell[cell] ? 1 : 0;\n        globe.coverage[cell] = coverageTotal[cell] / ticks;\n      }\n    }\n    globe.route = null;\n    document.getElementById(\"route\").textContent = \"\";\n    if (routingEnabled) {\n      var _globe$config$layers$ = globe.config.layers.routing,\n        pointA = _globe$config$layers$.pointA,\n        pointB = _globe$config$layers$.pointB,\n        use_laser_links = _globe$config$layers$.use_laser_links,\n        use_gateways = _globe$config$layers$.use_gateways;\n      var links = [];\n      if (use_laser_links) {\n        links.push.apply(links, _toConsumableArray(globe.laserLinks));\n      }\n      var relays = [];\n      if (use_gateways) {\n        relays.push.apply(relays, _toConsumableArray(globe.gateways.map(function (g) {\n          return g.position;\n        })));\n      }\n      try {\n        globe.route = computeShortestPath(pointA, pointB, positions, {\n          links: links,\n          relays: relays,\n          satellitesByCell: satellitesByCell,\n          resolution: resolution\n        });\n        document.getElementById(\"route\").textContent = \"Route distance: \".concat(Math.round(globe.route.distance), \" km. Route latency: ~\").concat(Math.round(globe.route.latency), \" ms\");\n      } catch (e) {\n        document.getElementById(\"route\").textContent = \"Route: none\";\n      }\n    }\n    var _iterator = _createForOfIteratorHelper(customLayerData),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var data = _step.value;\n        if (data.satelliteIndex != null) {\n          data.position = positions[data.satelliteIndex];\n        }\n        if (data.satelliteIndexes) {\n          data.positions = data.satelliteIndexes.map(function (index) {\n            return positions[index];\n          });\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    globe.customLayerData(customLayerData);\n    var now = Date.now();\n    if (last != null) {\n      var fps = 1 / ((now - last) / 1000);\n      avgFps = (avgFps || fps) * SMOOTHING + fps * (1.0 - SMOOTHING);\n      document.getElementById(\"fps\").textContent = avgFps.toFixed(0) + \" FPS\";\n    }\n    last = now;\n    document.getElementById(\"time\").textContent = String(date).replace(/ \\(.*/, \"\");\n  }\n  return startTimer(update, {\n    // start: globe.date ? globe.date.getTime() : Date.now(),\n    multiplier: function multiplier() {\n      return _multiplier;\n    },\n    interval: 20\n  });\n}\nvar _c;\n$RefreshReg$(_c, \"SatSim\");","map":{"version":3,"names":["_regeneratorRuntime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","defineProperty","obj","key","desc","value","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","call","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","done","methodName","undefined","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","_catch","thrown","delegateYield","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread","target","arguments","source","_defineProperty","getOwnPropertyDescriptors","defineProperties","React","loadStarlink","generateStarlink","_","assocIn","getIn","startTimer","getSatellitePositions","getCellsForResolution","computeCoverage","computeCoverageAtMoment","makeCoverage","Globe","Setting","SettingNumber","SettingRange","SettingsSection","SettingsLayerSection","SettingsSectionHeader","SettingsButton","SettingsRow","SettingSelect","satelliteLayer","laserLayer","laserLinksForSatellites","coverageLayer","gatewayLayer","getGateways","getGatewaysIndex","routingLayer","computeShortestPath","layers","GENERATED_PRESETS","orbitalPlanes","satellitesPerOrbitalPlane","altitude","inclination","DEFAULT_CONFIG","multiplier","elevation","satellitesType","generated","LAYERS_MAP","_i","_layers","layer","defaultConfig","getConfigFromURL","JSON","parse","atob","window","location","hash","e","setConfigInURL","config","btoa","stringify","SatSim","_s","_this","ref","useRef","_React$useState","useState","_React$useState2","_slicedToArray","globe","setGlobe","_React$useState3","_React$useState4","setConfigState","setConfig","keyPath","newConfig","getConfig","inputConfig","onChange","checkboxConfig","checked","useEffect","init","current","_React$useState5","_React$useState6","computedConfig","setComputedConfig","_asyncToGenerator","_callee","satellites","_callee$","_context","update","_React$useState7","_React$useState8","multiplier_","setMultiplier","_React$useState9","_React$useState10","elevation_","setElevation","setRealTime","date","Date","now","_React$useState11","innerWidth","_React$useState12","settingsVisible","setSettingsVisible","settingsProps","__jsx","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","id","href","onClick","_extends","findIndex","_ref2","isEqual","disabled","map","_ref3","index","shell","shellIndex","shells","concat","_toConsumableArray","title","min","max","canEnable","renderSettings","_c","element","globeImageUrl","pointOfView","lat","lng","customThreeObject","d","globeRadius","radius","console","warn","customThreeObjectUpdate","resolution","coverage","coverageAverageEnabled","enabled","routingEnabled","routing","routingLasersEnabled","use_laser_links","laserEnabled","laser","coverageTotal","cells","laserLinks","gateways","gateway","gatewaysIndex","enabledLayers","customLayerData","flatMap","objects","ticks","last","avgFps","SMOOTHING","positions","satellitesByCell","cellsBySatellite","_computeCoverageAtMom","_i2","_Object$keys","cell","route","document","getElementById","textContent","_globe$config$layers$","pointA","pointB","use_gateways","links","relays","g","position","Math","round","distance","latency","_iterator","_createForOfIteratorHelper","_step","s","n","data","satelliteIndex","satelliteIndexes","f","fps","toFixed","String","replace","interval","$RefreshReg$"],"sources":["/Users/maxmohammadi/Vorbit-Space/src/components/SatSim.tsx"],"sourcesContent":["import React from \"react\";\n\nimport { loadStarlink, generateStarlink } from \"../starlink\";\n\nimport _ from \"lodash\";\nimport { assoc, assocIn, getIn } from \"icepick\";\n\nimport { startTimer } from \"../timer\";\nimport { getSatellitePositions } from \"../satellites\";\nimport {\n  getCellsForResolution,\n  computeCoverage,\n  computeCoverageAtMoment,\n  makeCoverage,\n} from \"../coverage\";\n\nimport Globe from \"globe.gl\";\n\nimport {\n  Setting,\n  SettingNumber,\n  SettingRange,\n  SettingsSection,\n  SettingsLayerSection,\n  SettingsSectionHeader,\n  SettingsButton,\n  SettingsRow,\n  SettingSelect,\n} from \"./settings\";\n\nimport satelliteLayer from \"../layers/satellite\";\nimport laserLayer, { laserLinksForSatellites } from \"../layers/laser\";\nimport coverageLayer from \"../layers/coverage\";\nimport gatewayLayer, { getGateways, getGatewaysIndex } from \"../layers/gateway\";\nimport routingLayer from \"../layers/routing\";\n\nimport { computeShortestPath } from \"../routing\";\n\nconst layers = [\n  satelliteLayer,\n  coverageLayer,\n  gatewayLayer,\n  laserLayer,\n  routingLayer,\n];\n\nconst GENERATED_PRESETS = [\n  {\n    name: \"Starlink - Original\",\n    value: [\n      {\n        orbitalPlanes: 32,\n        satellitesPerOrbitalPlane: 50,\n        altitude: 1100,\n        inclination: 53,\n      },\n    ],\n  },\n  {\n    name: \"Starlink - Nov 2018\",\n    value: [\n      {\n        orbitalPlanes: 24,\n        satellitesPerOrbitalPlane: 66,\n        altitude: 550,\n        inclination: 53,\n      },\n    ],\n  },\n  {\n    name: \"Starlink - Dec 2019\",\n    value: [\n      {\n        orbitalPlanes: 72,\n        satellitesPerOrbitalPlane: 22,\n        altitude: 550,\n        inclination: 53,\n      },\n    ],\n  },\n];\n\nconst DEFAULT_CONFIG = {\n  multiplier: 50,\n  elevation: 40,\n  satellitesType: \"starlink\",\n  layers: {},\n  generated: GENERATED_PRESETS[1].value,\n};\n\n// settings managed outside of config\nlet multiplier;\nlet elevation;\n\nconst LAYERS_MAP = {};\nfor (const layer of layers) {\n  LAYERS_MAP[layer.key] = layer;\n  DEFAULT_CONFIG.layers[layer.key] = { ...layer.defaultConfig };\n}\n\nfunction getConfigFromURL() {\n  try {\n    return JSON.parse(atob(window.location.hash.slice(1)));\n  } catch (e) {\n    return null;\n  }\n}\nfunction setConfigInURL(config) {\n  window.location.hash = \"#\" + btoa(JSON.stringify(config));\n}\n\nexport default function SatSim() {\n  const ref = React.useRef(null);\n  const [globe, setGlobe] = React.useState(null);\n  const [config, setConfigState] = React.useState(\n    getConfigFromURL() || DEFAULT_CONFIG\n  );\n  const setConfig = (keyPath, value) => {\n    const newConfig = assocIn(config, keyPath, value);\n    setConfigState(newConfig);\n    setConfigInURL(newConfig);\n  };\n  const getConfig = (keyPath) => getIn(config, keyPath);\n  const inputConfig = (keyPath) => ({\n    value: getConfig(keyPath),\n    onChange: (e) => setConfig(keyPath, e.target.value),\n  });\n  const checkboxConfig = (keyPath) => ({\n    checked: getConfig(keyPath),\n    onChange: (e) => setConfig(keyPath, e.target.checked),\n  });\n\n  React.useEffect(() => {\n    const globe = init(ref.current);\n    setGlobe({ globe });\n  }, []);\n\n  const [computedConfig, setComputedConfig] = React.useState(null);\n  React.useEffect(() => {\n    (async () => {\n      let satellites = [];\n      if (config.satellitesType === \"starlink\") {\n        satellites = await loadStarlink();\n      } else if (config.satellitesType === \"generated\") {\n        satellites = generateStarlink(config.generated);\n      }\n      setComputedConfig({\n        ...config,\n        satellites,\n      });\n    })();\n  }, [config]);\n\n  React.useEffect(() => {\n    if (globe && computedConfig) {\n      globe.globe.config = computedConfig;\n      return update(globe.globe);\n    }\n  }, [globe, computedConfig]);\n\n  // these are stored separately for performance reasons\n  const [multiplier_, setMultiplier] = React.useState(\n    DEFAULT_CONFIG.multiplier\n  );\n  multiplier = multiplier_;\n  const [elevation_, setElevation] = React.useState(DEFAULT_CONFIG.elevation);\n  elevation = elevation_;\n\n  const setRealTime = () => {\n    setMultiplier(1);\n    globe.date = null;\n    setConfig([\"nonce\"], Date.now());\n  };\n\n  const [settingsVisible, setSettingsVisible] = React.useState(\n    window.innerWidth > 1000\n  );\n\n  const settingsProps = {\n    config,\n    inputConfig,\n    checkboxConfig,\n    setConfig,\n    getConfig,\n  };\n  return (\n    <div>\n      <div\n        className=\"absolute top-0 left-0 bottom-0 right-0 flex flex-col items-center bg-black\"\n        ref={ref}\n      ></div>\n      <div className=\"absolute bottom-0 left-0 text-white p-2\" id=\"time\"></div>\n      <div className=\"absolute bottom-0 right-0 text-white p-2\" id=\"fps\"></div>\n      <div\n        className=\"absolute bottom-0 right-0 left-0 text-white text-center p-2\"\n        id=\"route\"\n      ></div>\n      <div className=\"absolute top-0 right-0 text-white\">\n        SatSim v1.0 <a href=\"https://github.com/tlrobinson/satsim\">(src)</a>\n      </div>\n      {settingsVisible ? (\n        <div className=\"absolute top-0 left-0 text-white\">\n          <SettingsSectionHeader>\n            Satellites\n            <span className=\"flex-1\" />\n            <SettingsButton onClick={() => setSettingsVisible(false)}>\n              ×\n            </SettingsButton>\n          </SettingsSectionHeader>\n          <SettingsSection>\n            <SettingsRow>\n              <SettingSelect {...inputConfig([\"satellitesType\"])}>\n                <option value=\"starlink\">Starlink (Live)</option>\n                <option value=\"generated\">Generated</option>\n              </SettingSelect>\n              {getConfig([\"satellitesType\"]) === \"generated\" && (\n                <SettingSelect\n                  className=\"ml-2\"\n                  value={_.findIndex(GENERATED_PRESETS, ({ value }) =>\n                    _.isEqual(value, config.generated)\n                  )}\n                  onChange={(e) =>\n                    setConfig(\n                      [\"generated\"],\n                      GENERATED_PRESETS[e.target.value].value\n                    )\n                  }\n                >\n                  <option disabled value={-1}>\n                    Select a preset...\n                  </option>\n                  {GENERATED_PRESETS.map(({ name }, index) => (\n                    <option value={index}>{name}</option>\n                  ))}\n                </SettingSelect>\n              )}\n            </SettingsRow>\n\n            {getConfig([\"satellitesType\"]) === \"generated\" && (\n              <div>\n                {getConfig([\"generated\"]).map((shell, shellIndex, shells) => (\n                  <div className=\"border-b border-white mt-1 mb-1 pb-1\">\n                    <div className=\"flex items-center\">\n                      <strong>Orbital Shell {shellIndex + 1}</strong>\n                      <span>\n                        {\" – \"}\n                        {shell.orbitalPlanes *\n                          shell.satellitesPerOrbitalPlane}{\" \"}\n                        satellites\n                      </span>\n                      <span className=\"flex-1\" />\n                      {shells.length > 1 && (\n                        <SettingsButton\n                          onClick={() =>\n                            setConfig(\n                              [\"generated\"],\n                              [\n                                ...shells.slice(0, shellIndex),\n                                ...shells.slice(shellIndex + 1),\n                              ]\n                            )\n                          }\n                        >\n                          ×\n                        </SettingsButton>\n                      )}\n                      {shellIndex === shells.length - 1 && (\n                        <SettingsButton\n                          onClick={() =>\n                            setConfig([\"generated\"], [...shells, shell])\n                          }\n                        >\n                          +\n                        </SettingsButton>\n                      )}\n                    </div>\n                    <Setting title=\"Orbital Planes\">\n                      <SettingNumber\n                        min={1}\n                        max={100}\n                        {...inputConfig([\n                          \"generated\",\n                          shellIndex,\n                          \"orbitalPlanes\",\n                        ])}\n                      />\n                    </Setting>\n                    <Setting title=\"Satellites per Plane\">\n                      <SettingNumber\n                        min={1}\n                        max={100}\n                        {...inputConfig([\n                          \"generated\",\n                          shellIndex,\n                          \"satellitesPerOrbitalPlane\",\n                        ])}\n                      />\n                    </Setting>\n                    <Setting title=\"Inclination\">\n                      <SettingNumber\n                        min={0}\n                        max={360}\n                        {...inputConfig([\n                          \"generated\",\n                          shellIndex,\n                          \"inclination\",\n                        ])}\n                      />\n                    </Setting>\n                    <Setting title=\"Altitude\">\n                      <SettingNumber\n                        min={1}\n                        max={1000}\n                        {...inputConfig([\"generated\", shellIndex, \"altitude\"])}\n                      />\n                    </Setting>\n                  </div>\n                ))}\n              </div>\n            )}\n            <Setting title=\"Min Elevation\">\n              <SettingRange\n                min={0}\n                max={90}\n                value={elevation}\n                onChange={(e) => setElevation(e.target.value)}\n              />\n              <span className=\"ml-1\">{elevation}°</span>\n            </Setting>\n          </SettingsSection>\n          <SettingsSectionHeader>Time</SettingsSectionHeader>\n          <SettingsSection>\n            <SettingsRow>\n              <SettingRange\n                min={-400}\n                max={400}\n                value={multiplier}\n                onChange={(e) => setMultiplier(e.target.value)}\n              />\n              <span className=\"ml-1\">{multiplier}×</span>\n              <span className=\"flex-1\" />\n              <SettingsButton onClick={setRealTime}>Real-time</SettingsButton>\n            </SettingsRow>\n          </SettingsSection>\n          <SettingsSectionHeader>Layers</SettingsSectionHeader>\n          {layers\n            .filter(\n              (layer) =>\n                typeof layer.canEnable !== \"function\" || layer.canEnable(config)\n            )\n            .map((layer) => (\n              <SettingsLayerSection\n                layer={layer}\n                config={config}\n                setConfig={setConfig}\n              >\n                {typeof layer.renderSettings === \"function\" &&\n                  layer.renderSettings(settingsProps)}\n              </SettingsLayerSection>\n            ))}\n        </div>\n      ) : (\n        <div className=\"absolute top-0 left-0 text-white\">\n          <SettingsSectionHeader>\n            <SettingsButton onClick={() => setSettingsVisible(true)}>\n              Settings\n            </SettingsButton>\n          </SettingsSectionHeader>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction init(element) {\n  const globe = Globe();\n\n  globe(element)\n    .globeImageUrl(\"//unpkg.com/three-globe/example/img/earth-dark.jpg\")\n    // .bumpImageUrl(\"//unpkg.com/three-globe/example/img/earth-topology.png\")\n    // .backgroundImageUrl(\"//unpkg.com/three-globe/example/img/night-sky.png\")\n    .pointOfView({ lat: 38, lng: -100, altitude: 1.5 }, 1000)\n    .customThreeObject((d, globeRadius) => {\n      globe.radius = globeRadius;\n      if (LAYERS_MAP[d.type]) {\n        return LAYERS_MAP[d.type].create(globe, d, globeRadius);\n      } else {\n        console.warn(\"Unknown type\", d.type);\n      }\n    })\n    .customThreeObjectUpdate((obj, d, globeRadius) => {\n      globe.radius = globeRadius;\n      if (LAYERS_MAP[d.type]) {\n        return LAYERS_MAP[d.type].update(globe, d, obj, globeRadius);\n      }\n    });\n\n  return globe;\n}\n\nfunction update(globe) {\n  const { config } = globe;\n  const { satellites } = config;\n\n  globe.satellites = satellites;\n\n  const resolution = config.layers.coverage.resolution;\n\n  const coverageAverageEnabled =\n    config.layers.coverage.enabled && config.layers.coverage.type === \"average\";\n  const routingEnabled = config.layers.routing.enabled;\n  const routingLasersEnabled = config.layers.routing.use_laser_links;\n  const laserEnabled = config.layers.laser.enabled;\n\n  let coverageTotal;\n  if (coverageAverageEnabled) {\n    globe.cells = getCellsForResolution(resolution);\n    globe.coverage = computeCoverage({ resolution, satellites });\n    coverageTotal = makeCoverage(globe.cells);\n  }\n\n  globe.laserLinks = [];\n  if (laserEnabled || (routingEnabled && routingLasersEnabled)) {\n    globe.laserLinks = laserLinksForSatellites(satellites, config.layers.laser);\n  }\n\n  globe.gateways = getGateways(config.layers.gateway);\n  globe.gatewaysIndex = getGatewaysIndex(globe.gateways);\n\n  const enabledLayers = layers.filter(\n    (layer) => config.layers[layer.key].enabled\n  );\n\n  const customLayerData = enabledLayers.flatMap((layer) =>\n    layer.objects(globe)\n  );\n\n  globe.customLayerData(customLayerData);\n\n  let ticks = 0;\n  let last;\n  let avgFps;\n  let SMOOTHING = 0.95;\n  function update(date) {\n    ticks++;\n\n    globe.config.elevation = elevation;\n\n    const positions = getSatellitePositions(satellites, date, {\n      elevation: globe.config.elevation,\n    });\n\n    globe.positions = positions;\n    globe.date = date;\n\n    let satellitesByCell, cellsBySatellite;\n    if (coverageAverageEnabled || routingEnabled) {\n      ({ satellitesByCell, cellsBySatellite } = computeCoverageAtMoment({\n        elevation: globe.config.elevation,\n        resolution,\n        positions,\n      }));\n    }\n\n    globe.coverage = {};\n    if (coverageAverageEnabled) {\n      for (const cell of Object.keys(coverageTotal)) {\n        coverageTotal[cell] += satellitesByCell[cell] ? 1 : 0;\n        globe.coverage[cell] = coverageTotal[cell] / ticks;\n      }\n    }\n\n    globe.route = null;\n    document.getElementById(\"route\").textContent = \"\";\n    if (routingEnabled) {\n      const {\n        pointA,\n        pointB,\n        use_laser_links,\n        use_gateways,\n      } = globe.config.layers.routing;\n      let links = [];\n      if (use_laser_links) {\n        links.push(...globe.laserLinks);\n      }\n      let relays = [];\n      if (use_gateways) {\n        relays.push(...globe.gateways.map((g) => g.position));\n      }\n\n      try {\n        globe.route = computeShortestPath(pointA, pointB, positions, {\n          links,\n          relays,\n          satellitesByCell,\n          resolution,\n        });\n        document.getElementById(\n          \"route\"\n        ).textContent = `Route distance: ${Math.round(\n          globe.route.distance\n        )} km. Route latency: ~${Math.round(globe.route.latency)} ms`;\n      } catch (e) {\n        document.getElementById(\"route\").textContent = \"Route: none\";\n      }\n    }\n\n    for (const data of customLayerData) {\n      if (data.satelliteIndex != null) {\n        data.position = positions[data.satelliteIndex];\n      }\n      if (data.satelliteIndexes) {\n        data.positions = data.satelliteIndexes.map((index) => positions[index]);\n      }\n    }\n    globe.customLayerData(customLayerData);\n\n    const now = Date.now();\n    if (last != null) {\n      const fps = 1 / ((now - last) / 1000);\n      avgFps = (avgFps || fps) * SMOOTHING + fps * (1.0 - SMOOTHING);\n      document.getElementById(\"fps\").textContent = avgFps.toFixed(0) + \" FPS\";\n    }\n    last = now;\n\n    document.getElementById(\"time\").textContent = String(date).replace(\n      / \\(.*/,\n      \"\"\n    );\n  }\n\n  return startTimer(update, {\n    // start: globe.date ? globe.date.getTime() : Date.now(),\n    multiplier: () => multiplier,\n    interval: 20,\n  });\n}\n"],"mappings":";;;;;;;;;;;+CACA,qJAAAA,mBAAA,YAAAA,oBAAA,WAAAC,OAAA,SAAAA,OAAA,OAAAC,EAAA,GAAAC,MAAA,CAAAC,SAAA,EAAAC,MAAA,GAAAH,EAAA,CAAAI,cAAA,EAAAC,cAAA,GAAAJ,MAAA,CAAAI,cAAA,cAAAC,GAAA,EAAAC,GAAA,EAAAC,IAAA,IAAAF,GAAA,CAAAC,GAAA,IAAAC,IAAA,CAAAC,KAAA,KAAAC,OAAA,wBAAAC,MAAA,GAAAA,MAAA,OAAAC,cAAA,GAAAF,OAAA,CAAAG,QAAA,kBAAAC,mBAAA,GAAAJ,OAAA,CAAAK,aAAA,uBAAAC,iBAAA,GAAAN,OAAA,CAAAO,WAAA,8BAAAC,OAAAZ,GAAA,EAAAC,GAAA,EAAAE,KAAA,WAAAR,MAAA,CAAAI,cAAA,CAAAC,GAAA,EAAAC,GAAA,IAAAE,KAAA,EAAAA,KAAA,EAAAU,UAAA,MAAAC,YAAA,MAAAC,QAAA,SAAAf,GAAA,CAAAC,GAAA,WAAAW,MAAA,mBAAAI,GAAA,IAAAJ,MAAA,YAAAA,OAAAZ,GAAA,EAAAC,GAAA,EAAAE,KAAA,WAAAH,GAAA,CAAAC,GAAA,IAAAE,KAAA,gBAAAc,KAAAC,OAAA,EAAAC,OAAA,EAAAC,IAAA,EAAAC,WAAA,QAAAC,cAAA,GAAAH,OAAA,IAAAA,OAAA,CAAAvB,SAAA,YAAA2B,SAAA,GAAAJ,OAAA,GAAAI,SAAA,EAAAC,SAAA,GAAA7B,MAAA,CAAA8B,MAAA,CAAAH,cAAA,CAAA1B,SAAA,GAAA8B,OAAA,OAAAC,OAAA,CAAAN,WAAA,gBAAAtB,cAAA,CAAAyB,SAAA,eAAArB,KAAA,EAAAyB,gBAAA,CAAAV,OAAA,EAAAE,IAAA,EAAAM,OAAA,MAAAF,SAAA,aAAAK,SAAAC,EAAA,EAAA9B,GAAA,EAAA+B,GAAA,mBAAAC,IAAA,YAAAD,GAAA,EAAAD,EAAA,CAAAG,IAAA,CAAAjC,GAAA,EAAA+B,GAAA,cAAAf,GAAA,aAAAgB,IAAA,WAAAD,GAAA,EAAAf,GAAA,QAAAvB,OAAA,CAAAwB,IAAA,GAAAA,IAAA,MAAAiB,gBAAA,gBAAAX,UAAA,cAAAY,kBAAA,cAAAC,2BAAA,SAAAC,iBAAA,OAAAzB,MAAA,CAAAyB,iBAAA,EAAA/B,cAAA,qCAAAgC,QAAA,GAAA3C,MAAA,CAAA4C,cAAA,EAAAC,uBAAA,GAAAF,QAAA,IAAAA,QAAA,CAAAA,QAAA,CAAAG,MAAA,QAAAD,uBAAA,IAAAA,uBAAA,KAAA9C,EAAA,IAAAG,MAAA,CAAAoC,IAAA,CAAAO,uBAAA,EAAAlC,cAAA,MAAA+B,iBAAA,GAAAG,uBAAA,OAAAE,EAAA,GAAAN,0BAAA,CAAAxC,SAAA,GAAA2B,SAAA,CAAA3B,SAAA,GAAAD,MAAA,CAAA8B,MAAA,CAAAY,iBAAA,YAAAM,sBAAA/C,SAAA,gCAAAgD,OAAA,WAAAC,MAAA,IAAAjC,MAAA,CAAAhB,SAAA,EAAAiD,MAAA,YAAAd,GAAA,gBAAAe,OAAA,CAAAD,MAAA,EAAAd,GAAA,sBAAAgB,cAAAvB,SAAA,EAAAwB,WAAA,aAAAC,OAAAJ,MAAA,EAAAd,GAAA,EAAAmB,OAAA,EAAAC,MAAA,QAAAC,MAAA,GAAAvB,QAAA,CAAAL,SAAA,CAAAqB,MAAA,GAAArB,SAAA,EAAAO,GAAA,mBAAAqB,MAAA,CAAApB,IAAA,QAAAqB,MAAA,GAAAD,MAAA,CAAArB,GAAA,EAAA5B,KAAA,GAAAkD,MAAA,CAAAlD,KAAA,SAAAA,KAAA,uBAAAA,KAAA,IAAAN,MAAA,CAAAoC,IAAA,CAAA9B,KAAA,eAAA6C,WAAA,CAAAE,OAAA,CAAA/C,KAAA,CAAAmD,OAAA,EAAAC,IAAA,WAAApD,KAAA,IAAA8C,MAAA,SAAA9C,KAAA,EAAA+C,OAAA,EAAAC,MAAA,gBAAAnC,GAAA,IAAAiC,MAAA,UAAAjC,GAAA,EAAAkC,OAAA,EAAAC,MAAA,QAAAH,WAAA,CAAAE,OAAA,CAAA/C,KAAA,EAAAoD,IAAA,WAAAC,SAAA,IAAAH,MAAA,CAAAlD,KAAA,GAAAqD,SAAA,EAAAN,OAAA,CAAAG,MAAA,gBAAAI,KAAA,WAAAR,MAAA,UAAAQ,KAAA,EAAAP,OAAA,EAAAC,MAAA,SAAAA,MAAA,CAAAC,MAAA,CAAArB,GAAA,SAAA2B,eAAA,EAAA3D,cAAA,oBAAAI,KAAA,WAAAA,MAAA0C,MAAA,EAAAd,GAAA,aAAA4B,2BAAA,eAAAX,WAAA,WAAAE,OAAA,EAAAC,MAAA,IAAAF,MAAA,CAAAJ,MAAA,EAAAd,GAAA,EAAAmB,OAAA,EAAAC,MAAA,gBAAAO,eAAA,GAAAA,eAAA,GAAAA,eAAA,CAAAH,IAAA,CAAAI,0BAAA,EAAAA,0BAAA,IAAAA,0BAAA,qBAAA/B,iBAAAV,OAAA,EAAAE,IAAA,EAAAM,OAAA,QAAAkC,KAAA,sCAAAf,MAAA,EAAAd,GAAA,wBAAA6B,KAAA,YAAAC,KAAA,sDAAAD,KAAA,oBAAAf,MAAA,QAAAd,GAAA,SAAA+B,UAAA,WAAApC,OAAA,CAAAmB,MAAA,GAAAA,MAAA,EAAAnB,OAAA,CAAAK,GAAA,GAAAA,GAAA,UAAAgC,QAAA,GAAArC,OAAA,CAAAqC,QAAA,MAAAA,QAAA,QAAAC,cAAA,GAAAC,mBAAA,CAAAF,QAAA,EAAArC,OAAA,OAAAsC,cAAA,QAAAA,cAAA,KAAA9B,gBAAA,mBAAA8B,cAAA,qBAAAtC,OAAA,CAAAmB,MAAA,EAAAnB,OAAA,CAAAwC,IAAA,GAAAxC,OAAA,CAAAyC,KAAA,GAAAzC,OAAA,CAAAK,GAAA,sBAAAL,OAAA,CAAAmB,MAAA,6BAAAe,KAAA,QAAAA,KAAA,gBAAAlC,OAAA,CAAAK,GAAA,EAAAL,OAAA,CAAA0C,iBAAA,CAAA1C,OAAA,CAAAK,GAAA,uBAAAL,OAAA,CAAAmB,MAAA,IAAAnB,OAAA,CAAA2C,MAAA,WAAA3C,OAAA,CAAAK,GAAA,GAAA6B,KAAA,oBAAAR,MAAA,GAAAvB,QAAA,CAAAX,OAAA,EAAAE,IAAA,EAAAM,OAAA,oBAAA0B,MAAA,CAAApB,IAAA,QAAA4B,KAAA,GAAAlC,OAAA,CAAA4C,IAAA,mCAAAlB,MAAA,CAAArB,GAAA,KAAAG,gBAAA,qBAAA/B,KAAA,EAAAiD,MAAA,CAAArB,GAAA,EAAAuC,IAAA,EAAA5C,OAAA,CAAA4C,IAAA,kBAAAlB,MAAA,CAAApB,IAAA,KAAA4B,KAAA,gBAAAlC,OAAA,CAAAmB,MAAA,YAAAnB,OAAA,CAAAK,GAAA,GAAAqB,MAAA,CAAArB,GAAA,mBAAAkC,oBAAAF,QAAA,EAAArC,OAAA,QAAA6C,UAAA,GAAA7C,OAAA,CAAAmB,MAAA,EAAAA,MAAA,GAAAkB,QAAA,CAAAxD,QAAA,CAAAgE,UAAA,OAAAC,SAAA,KAAA3B,MAAA,SAAAnB,OAAA,CAAAqC,QAAA,qBAAAQ,UAAA,IAAAR,QAAA,CAAAxD,QAAA,eAAAmB,OAAA,CAAAmB,MAAA,aAAAnB,OAAA,CAAAK,GAAA,GAAAyC,SAAA,EAAAP,mBAAA,CAAAF,QAAA,EAAArC,OAAA,eAAAA,OAAA,CAAAmB,MAAA,kBAAA0B,UAAA,KAAA7C,OAAA,CAAAmB,MAAA,YAAAnB,OAAA,CAAAK,GAAA,OAAA0C,SAAA,uCAAAF,UAAA,iBAAArC,gBAAA,MAAAkB,MAAA,GAAAvB,QAAA,CAAAgB,MAAA,EAAAkB,QAAA,CAAAxD,QAAA,EAAAmB,OAAA,CAAAK,GAAA,mBAAAqB,MAAA,CAAApB,IAAA,SAAAN,OAAA,CAAAmB,MAAA,YAAAnB,OAAA,CAAAK,GAAA,GAAAqB,MAAA,CAAArB,GAAA,EAAAL,OAAA,CAAAqC,QAAA,SAAA7B,gBAAA,MAAAwC,IAAA,GAAAtB,MAAA,CAAArB,GAAA,SAAA2C,IAAA,GAAAA,IAAA,CAAAJ,IAAA,IAAA5C,OAAA,CAAAqC,QAAA,CAAAY,UAAA,IAAAD,IAAA,CAAAvE,KAAA,EAAAuB,OAAA,CAAAkD,IAAA,GAAAb,QAAA,CAAAc,OAAA,eAAAnD,OAAA,CAAAmB,MAAA,KAAAnB,OAAA,CAAAmB,MAAA,WAAAnB,OAAA,CAAAK,GAAA,GAAAyC,SAAA,GAAA9C,OAAA,CAAAqC,QAAA,SAAA7B,gBAAA,IAAAwC,IAAA,IAAAhD,OAAA,CAAAmB,MAAA,YAAAnB,OAAA,CAAAK,GAAA,OAAA0C,SAAA,sCAAA/C,OAAA,CAAAqC,QAAA,SAAA7B,gBAAA,cAAA4C,aAAAC,IAAA,QAAAC,KAAA,KAAAC,MAAA,EAAAF,IAAA,YAAAA,IAAA,KAAAC,KAAA,CAAAE,QAAA,GAAAH,IAAA,WAAAA,IAAA,KAAAC,KAAA,CAAAG,UAAA,GAAAJ,IAAA,KAAAC,KAAA,CAAAI,QAAA,GAAAL,IAAA,WAAAM,UAAA,CAAAC,IAAA,CAAAN,KAAA,cAAAO,cAAAP,KAAA,QAAA5B,MAAA,GAAA4B,KAAA,CAAAQ,UAAA,QAAApC,MAAA,CAAApB,IAAA,oBAAAoB,MAAA,CAAArB,GAAA,EAAAiD,KAAA,CAAAQ,UAAA,GAAApC,MAAA,aAAAzB,QAAAN,WAAA,SAAAgE,UAAA,MAAAJ,MAAA,aAAA5D,WAAA,CAAAuB,OAAA,CAAAkC,YAAA,cAAAW,KAAA,iBAAAhD,OAAAiD,QAAA,QAAAA,QAAA,QAAAC,cAAA,GAAAD,QAAA,CAAApF,cAAA,OAAAqF,cAAA,SAAAA,cAAA,CAAA1D,IAAA,CAAAyD,QAAA,4BAAAA,QAAA,CAAAd,IAAA,SAAAc,QAAA,OAAAE,KAAA,CAAAF,QAAA,CAAAG,MAAA,SAAAC,CAAA,OAAAlB,IAAA,YAAAA,KAAA,aAAAkB,CAAA,GAAAJ,QAAA,CAAAG,MAAA,OAAAhG,MAAA,CAAAoC,IAAA,CAAAyD,QAAA,EAAAI,CAAA,UAAAlB,IAAA,CAAAzE,KAAA,GAAAuF,QAAA,CAAAI,CAAA,GAAAlB,IAAA,CAAAN,IAAA,OAAAM,IAAA,SAAAA,IAAA,CAAAzE,KAAA,GAAAqE,SAAA,EAAAI,IAAA,CAAAN,IAAA,OAAAM,IAAA,YAAAA,IAAA,CAAAA,IAAA,GAAAA,IAAA,eAAAA,IAAA,EAAAd,UAAA,eAAAA,WAAA,aAAA3D,KAAA,EAAAqE,SAAA,EAAAF,IAAA,iBAAAnC,iBAAA,CAAAvC,SAAA,GAAAwC,0BAAA,EAAArC,cAAA,CAAA2C,EAAA,mBAAAvC,KAAA,EAAAiC,0BAAA,EAAAtB,YAAA,SAAAf,cAAA,CAAAqC,0BAAA,mBAAAjC,KAAA,EAAAgC,iBAAA,EAAArB,YAAA,SAAAqB,iBAAA,CAAA4D,WAAA,GAAAnF,MAAA,CAAAwB,0BAAA,EAAA1B,iBAAA,wBAAAjB,OAAA,CAAAuG,mBAAA,aAAAC,MAAA,QAAAC,IAAA,wBAAAD,MAAA,IAAAA,MAAA,CAAAE,WAAA,WAAAD,IAAA,KAAAA,IAAA,KAAA/D,iBAAA,6BAAA+D,IAAA,CAAAH,WAAA,IAAAG,IAAA,CAAAE,IAAA,OAAA3G,OAAA,CAAA4G,IAAA,aAAAJ,MAAA,WAAAtG,MAAA,CAAA2G,cAAA,GAAA3G,MAAA,CAAA2G,cAAA,CAAAL,MAAA,EAAA7D,0BAAA,KAAA6D,MAAA,CAAAM,SAAA,GAAAnE,0BAAA,EAAAxB,MAAA,CAAAqF,MAAA,EAAAvF,iBAAA,yBAAAuF,MAAA,CAAArG,SAAA,GAAAD,MAAA,CAAA8B,MAAA,CAAAiB,EAAA,GAAAuD,MAAA,KAAAxG,OAAA,CAAA+G,KAAA,aAAAzE,GAAA,aAAAuB,OAAA,EAAAvB,GAAA,OAAAY,qBAAA,CAAAI,aAAA,CAAAnD,SAAA,GAAAgB,MAAA,CAAAmC,aAAA,CAAAnD,SAAA,EAAAY,mBAAA,iCAAAf,OAAA,CAAAsD,aAAA,GAAAA,aAAA,EAAAtD,OAAA,CAAAgH,KAAA,aAAAvF,OAAA,EAAAC,OAAA,EAAAC,IAAA,EAAAC,WAAA,EAAA2B,WAAA,eAAAA,WAAA,KAAAA,WAAA,GAAA0D,OAAA,OAAAC,IAAA,OAAA5D,aAAA,CAAA9B,IAAA,CAAAC,OAAA,EAAAC,OAAA,EAAAC,IAAA,EAAAC,WAAA,GAAA2B,WAAA,UAAAvD,OAAA,CAAAuG,mBAAA,CAAA7E,OAAA,IAAAwF,IAAA,GAAAA,IAAA,CAAA/B,IAAA,GAAArB,IAAA,WAAAF,MAAA,WAAAA,MAAA,CAAAiB,IAAA,GAAAjB,MAAA,CAAAlD,KAAA,GAAAwG,IAAA,CAAA/B,IAAA,WAAAjC,qBAAA,CAAAD,EAAA,GAAA9B,MAAA,CAAA8B,EAAA,EAAAhC,iBAAA,gBAAAE,MAAA,CAAA8B,EAAA,EAAApC,cAAA,iCAAAM,MAAA,CAAA8B,EAAA,6DAAAjD,OAAA,CAAAmH,IAAA,aAAAC,GAAA,QAAAC,MAAA,GAAAnH,MAAA,CAAAkH,GAAA,GAAAD,IAAA,gBAAA3G,GAAA,IAAA6G,MAAA,EAAAF,IAAA,CAAAtB,IAAA,CAAArF,GAAA,UAAA2G,IAAA,CAAAG,OAAA,aAAAnC,KAAA,WAAAgC,IAAA,CAAAf,MAAA,SAAA5F,GAAA,GAAA2G,IAAA,CAAAI,GAAA,QAAA/G,GAAA,IAAA6G,MAAA,SAAAlC,IAAA,CAAAzE,KAAA,GAAAF,GAAA,EAAA2E,IAAA,CAAAN,IAAA,OAAAM,IAAA,WAAAA,IAAA,CAAAN,IAAA,OAAAM,IAAA,QAAAnF,OAAA,CAAAgD,MAAA,GAAAA,MAAA,EAAAd,OAAA,CAAA/B,SAAA,KAAAuG,WAAA,EAAAxE,OAAA,EAAA8D,KAAA,WAAAA,MAAAwB,aAAA,aAAAC,IAAA,WAAAtC,IAAA,WAAAV,IAAA,QAAAC,KAAA,GAAAK,SAAA,OAAAF,IAAA,YAAAP,QAAA,cAAAlB,MAAA,gBAAAd,GAAA,GAAAyC,SAAA,OAAAa,UAAA,CAAAzC,OAAA,CAAA2C,aAAA,IAAA0B,aAAA,WAAAb,IAAA,kBAAAA,IAAA,CAAAe,MAAA,OAAAtH,MAAA,CAAAoC,IAAA,OAAAmE,IAAA,MAAAR,KAAA,EAAAQ,IAAA,CAAAgB,KAAA,cAAAhB,IAAA,IAAA5B,SAAA,MAAA6C,IAAA,WAAAA,KAAA,SAAA/C,IAAA,WAAAgD,UAAA,QAAAjC,UAAA,IAAAG,UAAA,kBAAA8B,UAAA,CAAAtF,IAAA,QAAAsF,UAAA,CAAAvF,GAAA,cAAAwF,IAAA,KAAAnD,iBAAA,WAAAA,kBAAAoD,SAAA,aAAAlD,IAAA,QAAAkD,SAAA,MAAA9F,OAAA,kBAAA+F,OAAAC,GAAA,EAAAC,MAAA,WAAAvE,MAAA,CAAApB,IAAA,YAAAoB,MAAA,CAAArB,GAAA,GAAAyF,SAAA,EAAA9F,OAAA,CAAAkD,IAAA,GAAA8C,GAAA,EAAAC,MAAA,KAAAjG,OAAA,CAAAmB,MAAA,WAAAnB,OAAA,CAAAK,GAAA,GAAAyC,SAAA,KAAAmD,MAAA,aAAA7B,CAAA,QAAAT,UAAA,CAAAQ,MAAA,MAAAC,CAAA,SAAAA,CAAA,QAAAd,KAAA,QAAAK,UAAA,CAAAS,CAAA,GAAA1C,MAAA,GAAA4B,KAAA,CAAAQ,UAAA,iBAAAR,KAAA,CAAAC,MAAA,SAAAwC,MAAA,aAAAzC,KAAA,CAAAC,MAAA,SAAAiC,IAAA,QAAAU,QAAA,GAAA/H,MAAA,CAAAoC,IAAA,CAAA+C,KAAA,eAAA6C,UAAA,GAAAhI,MAAA,CAAAoC,IAAA,CAAA+C,KAAA,qBAAA4C,QAAA,IAAAC,UAAA,aAAAX,IAAA,GAAAlC,KAAA,CAAAE,QAAA,SAAAuC,MAAA,CAAAzC,KAAA,CAAAE,QAAA,gBAAAgC,IAAA,GAAAlC,KAAA,CAAAG,UAAA,SAAAsC,MAAA,CAAAzC,KAAA,CAAAG,UAAA,cAAAyC,QAAA,aAAAV,IAAA,GAAAlC,KAAA,CAAAE,QAAA,SAAAuC,MAAA,CAAAzC,KAAA,CAAAE,QAAA,qBAAA2C,UAAA,YAAAhE,KAAA,qDAAAqD,IAAA,GAAAlC,KAAA,CAAAG,UAAA,SAAAsC,MAAA,CAAAzC,KAAA,CAAAG,UAAA,YAAAd,MAAA,WAAAA,OAAArC,IAAA,EAAAD,GAAA,aAAA+D,CAAA,QAAAT,UAAA,CAAAQ,MAAA,MAAAC,CAAA,SAAAA,CAAA,QAAAd,KAAA,QAAAK,UAAA,CAAAS,CAAA,OAAAd,KAAA,CAAAC,MAAA,SAAAiC,IAAA,IAAArH,MAAA,CAAAoC,IAAA,CAAA+C,KAAA,wBAAAkC,IAAA,GAAAlC,KAAA,CAAAG,UAAA,QAAA2C,YAAA,GAAA9C,KAAA,aAAA8C,YAAA,iBAAA9F,IAAA,mBAAAA,IAAA,KAAA8F,YAAA,CAAA7C,MAAA,IAAAlD,GAAA,IAAAA,GAAA,IAAA+F,YAAA,CAAA3C,UAAA,KAAA2C,YAAA,cAAA1E,MAAA,GAAA0E,YAAA,GAAAA,YAAA,CAAAtC,UAAA,cAAApC,MAAA,CAAApB,IAAA,GAAAA,IAAA,EAAAoB,MAAA,CAAArB,GAAA,GAAAA,GAAA,EAAA+F,YAAA,SAAAjF,MAAA,gBAAA+B,IAAA,GAAAkD,YAAA,CAAA3C,UAAA,EAAAjD,gBAAA,SAAA6F,QAAA,CAAA3E,MAAA,MAAA2E,QAAA,WAAAA,SAAA3E,MAAA,EAAAgC,QAAA,oBAAAhC,MAAA,CAAApB,IAAA,QAAAoB,MAAA,CAAArB,GAAA,qBAAAqB,MAAA,CAAApB,IAAA,mBAAAoB,MAAA,CAAApB,IAAA,QAAA4C,IAAA,GAAAxB,MAAA,CAAArB,GAAA,gBAAAqB,MAAA,CAAApB,IAAA,SAAAuF,IAAA,QAAAxF,GAAA,GAAAqB,MAAA,CAAArB,GAAA,OAAAc,MAAA,kBAAA+B,IAAA,yBAAAxB,MAAA,CAAApB,IAAA,IAAAoD,QAAA,UAAAR,IAAA,GAAAQ,QAAA,GAAAlD,gBAAA,KAAA8F,MAAA,WAAAA,OAAA7C,UAAA,aAAAW,CAAA,QAAAT,UAAA,CAAAQ,MAAA,MAAAC,CAAA,SAAAA,CAAA,QAAAd,KAAA,QAAAK,UAAA,CAAAS,CAAA,OAAAd,KAAA,CAAAG,UAAA,KAAAA,UAAA,cAAA4C,QAAA,CAAA/C,KAAA,CAAAQ,UAAA,EAAAR,KAAA,CAAAI,QAAA,GAAAG,aAAA,CAAAP,KAAA,GAAA9C,gBAAA,yBAAA+F,OAAAhD,MAAA,aAAAa,CAAA,QAAAT,UAAA,CAAAQ,MAAA,MAAAC,CAAA,SAAAA,CAAA,QAAAd,KAAA,QAAAK,UAAA,CAAAS,CAAA,OAAAd,KAAA,CAAAC,MAAA,KAAAA,MAAA,QAAA7B,MAAA,GAAA4B,KAAA,CAAAQ,UAAA,kBAAApC,MAAA,CAAApB,IAAA,QAAAkG,MAAA,GAAA9E,MAAA,CAAArB,GAAA,EAAAwD,aAAA,CAAAP,KAAA,YAAAkD,MAAA,gBAAArE,KAAA,8BAAAsE,aAAA,WAAAA,cAAAzC,QAAA,EAAAf,UAAA,EAAAE,OAAA,gBAAAd,QAAA,KAAAxD,QAAA,EAAAkC,MAAA,CAAAiD,QAAA,GAAAf,UAAA,EAAAA,UAAA,EAAAE,OAAA,EAAAA,OAAA,oBAAAhC,MAAA,UAAAd,GAAA,GAAAyC,SAAA,GAAAtC,gBAAA,OAAAzC,OAAA;AAAA,SAAA2I,QAAAtB,MAAA,EAAAuB,cAAA,QAAAzB,IAAA,GAAAjH,MAAA,CAAAiH,IAAA,CAAAE,MAAA,OAAAnH,MAAA,CAAA2I,qBAAA,QAAAC,OAAA,GAAA5I,MAAA,CAAA2I,qBAAA,CAAAxB,MAAA,GAAAuB,cAAA,KAAAE,OAAA,GAAAA,OAAA,CAAAC,MAAA,WAAAC,GAAA,WAAA9I,MAAA,CAAA+I,wBAAA,CAAA5B,MAAA,EAAA2B,GAAA,EAAA5H,UAAA,OAAA+F,IAAA,CAAAtB,IAAA,CAAAqD,KAAA,CAAA/B,IAAA,EAAA2B,OAAA,YAAA3B,IAAA;AAAA,SAAAgC,cAAAC,MAAA,aAAA/C,CAAA,MAAAA,CAAA,GAAAgD,SAAA,CAAAjD,MAAA,EAAAC,CAAA,UAAAiD,MAAA,WAAAD,SAAA,CAAAhD,CAAA,IAAAgD,SAAA,CAAAhD,CAAA,QAAAA,CAAA,OAAAsC,OAAA,CAAAzI,MAAA,CAAAoJ,MAAA,OAAAnG,OAAA,WAAA3C,GAAA,IAAA+I,eAAA,CAAAH,MAAA,EAAA5I,GAAA,EAAA8I,MAAA,CAAA9I,GAAA,SAAAN,MAAA,CAAAsJ,yBAAA,GAAAtJ,MAAA,CAAAuJ,gBAAA,CAAAL,MAAA,EAAAlJ,MAAA,CAAAsJ,yBAAA,CAAAF,MAAA,KAAAX,OAAA,CAAAzI,MAAA,CAAAoJ,MAAA,GAAAnG,OAAA,WAAA3C,GAAA,IAAAN,MAAA,CAAAI,cAAA,CAAA8I,MAAA,EAAA5I,GAAA,EAAAN,MAAA,CAAA+I,wBAAA,CAAAK,MAAA,EAAA9I,GAAA,iBAAA4I,MAAA;AADA,OAAOM,KAAK,MAAM,OAAO;AAEzB,SAASC,YAAY,EAAEC,gBAAgB,QAAQ,aAAa;AAE5D,OAAOC,CAAC,MAAM,QAAQ;AACtB,SAAgBC,OAAO,EAAEC,KAAK,QAAQ,SAAS;AAE/C,SAASC,UAAU,QAAQ,UAAU;AACrC,SAASC,qBAAqB,QAAQ,eAAe;AACrD,SACEC,qBAAqB,EACrBC,eAAe,EACfC,uBAAuB,EACvBC,YAAY,QACP,aAAa;AAEpB,OAAOC,KAAK,MAAM,UAAU;AAE5B,SACEC,OAAO,EACPC,aAAa,EACbC,YAAY,EACZC,eAAe,EACfC,oBAAoB,EACpBC,qBAAqB,EACrBC,cAAc,EACdC,WAAW,EACXC,aAAa,QACR,YAAY;AAEnB,OAAOC,cAAc,MAAM,qBAAqB;AAChD,OAAOC,UAAU,IAAIC,uBAAuB,QAAQ,iBAAiB;AACrE,OAAOC,aAAa,MAAM,oBAAoB;AAC9C,OAAOC,YAAY,IAAIC,WAAW,EAAEC,gBAAgB,QAAQ,mBAAmB;AAC/E,OAAOC,YAAY,MAAM,mBAAmB;AAE5C,SAASC,mBAAmB,QAAQ,YAAY;AAEhD,IAAMC,MAAM,GAAG,CACbT,cAAc,EACdG,aAAa,EACbC,YAAY,EACZH,UAAU,EACVM,YAAY,CACb;AAED,IAAMG,iBAAiB,GAAG,CACxB;EACE/E,IAAI,EAAE,qBAAqB;EAC3BjG,KAAK,EAAE,CACL;IACEiL,aAAa,EAAE,EAAE;IACjBC,yBAAyB,EAAE,EAAE;IAC7BC,QAAQ,EAAE,IAAI;IACdC,WAAW,EAAE;EACf,CAAC;AAEL,CAAC,EACD;EACEnF,IAAI,EAAE,qBAAqB;EAC3BjG,KAAK,EAAE,CACL;IACEiL,aAAa,EAAE,EAAE;IACjBC,yBAAyB,EAAE,EAAE;IAC7BC,QAAQ,EAAE,GAAG;IACbC,WAAW,EAAE;EACf,CAAC;AAEL,CAAC,EACD;EACEnF,IAAI,EAAE,qBAAqB;EAC3BjG,KAAK,EAAE,CACL;IACEiL,aAAa,EAAE,EAAE;IACjBC,yBAAyB,EAAE,EAAE;IAC7BC,QAAQ,EAAE,GAAG;IACbC,WAAW,EAAE;EACf,CAAC;AAEL,CAAC,CACF;AAED,IAAMC,cAAc,GAAG;EACrBC,UAAU,EAAE,EAAE;EACdC,SAAS,EAAE,EAAE;EACbC,cAAc,EAAE,UAAU;EAC1BT,MAAM,EAAE,CAAC,CAAC;EACVU,SAAS,EAAET,iBAAiB,CAAC,CAAC,CAAC,CAAChL;AAClC,CAAC;;AAED;AACA,IAAIsL,WAAU;AACd,IAAIC,SAAS;AAEb,IAAMG,UAAU,GAAG,CAAC,CAAC;AACrB,SAAAC,EAAA,MAAAC,OAAA,GAAoBb,MAAM,EAAAY,EAAA,GAAAC,OAAA,CAAAlG,MAAA,EAAAiG,EAAA,IAAE;EAAvB,IAAME,KAAK,GAAAD,OAAA,CAAAD,EAAA;EACdD,UAAU,CAACG,KAAK,CAAC/L,GAAG,CAAC,GAAG+L,KAAK;EAC7BR,cAAc,CAACN,MAAM,CAACc,KAAK,CAAC/L,GAAG,CAAC,GAAA2I,aAAA,KAAQoD,KAAK,CAACC,aAAa,CAAE;AAC/D;AAEA,SAASC,gBAAgBA,CAAA,EAAG;EAC1B,IAAI;IACF,OAAOC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAACpF,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;EACxD,CAAC,CAAC,OAAOqF,CAAC,EAAE;IACV,OAAO,IAAI;EACb;AACF;AACA,SAASC,cAAcA,CAACC,MAAM,EAAE;EAC9BL,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,GAAG,GAAGI,IAAI,CAACT,IAAI,CAACU,SAAS,CAACF,MAAM,CAAC,CAAC;AAC3D;AAEA,eAAe,SAASG,MAAMA,CAAA,EAAG;EAAAC,EAAA;EAAA,IAAAC,KAAA;EAC/B,IAAMC,GAAG,GAAG9D,KAAK,CAAC+D,MAAM,CAAC,IAAI,CAAC;EAC9B,IAAAC,eAAA,GAA0BhE,KAAK,CAACiE,QAAQ,CAAC,IAAI,CAAC;IAAAC,gBAAA,GAAAC,cAAA,CAAAH,eAAA;IAAvCI,KAAK,GAAAF,gBAAA;IAAEG,QAAQ,GAAAH,gBAAA;EACtB,IAAAI,gBAAA,GAAiCtE,KAAK,CAACiE,QAAQ,CAC7ClB,gBAAgB,EAAE,IAAIV,cAAc,CACrC;IAAAkC,gBAAA,GAAAJ,cAAA,CAAAG,gBAAA;IAFMd,MAAM,GAAAe,gBAAA;IAAEC,cAAc,GAAAD,gBAAA;EAG7B,IAAME,SAAS,GAAG,SAAZA,SAASA,CAAIC,OAAO,EAAE1N,KAAK,EAAK;IACpC,IAAM2N,SAAS,GAAGvE,OAAO,CAACoD,MAAM,EAAEkB,OAAO,EAAE1N,KAAK,CAAC;IACjDwN,cAAc,CAACG,SAAS,CAAC;IACzBpB,cAAc,CAACoB,SAAS,CAAC;EAC3B,CAAC;EACD,IAAMC,SAAS,GAAG,SAAZA,SAASA,CAAIF,OAAO;IAAA,OAAKrE,KAAK,CAACmD,MAAM,EAAEkB,OAAO,CAAC;EAAA;EACrD,IAAMG,WAAW,GAAG,SAAdA,WAAWA,CAAIH,OAAO;IAAA,OAAM;MAChC1N,KAAK,EAAE4N,SAAS,CAACF,OAAO,CAAC;MACzBI,QAAQ,EAAE,SAAAA,SAACxB,CAAC;QAAA,OAAKmB,SAAS,CAACC,OAAO,EAAEpB,CAAC,CAAC5D,MAAM,CAAC1I,KAAK,CAAC;MAAA;IACrD,CAAC;EAAA,CAAC;EACF,IAAM+N,cAAc,GAAG,SAAjBA,cAAcA,CAAIL,OAAO;IAAA,OAAM;MACnCM,OAAO,EAAEJ,SAAS,CAACF,OAAO,CAAC;MAC3BI,QAAQ,EAAE,SAAAA,SAACxB,CAAC;QAAA,OAAKmB,SAAS,CAACC,OAAO,EAAEpB,CAAC,CAAC5D,MAAM,CAACsF,OAAO,CAAC;MAAA;IACvD,CAAC;EAAA,CAAC;EAEFhF,KAAK,CAACiF,SAAS,CAAC,YAAM;IACpB,IAAMb,KAAK,GAAGc,IAAI,CAACpB,GAAG,CAACqB,OAAO,CAAC;IAC/Bd,QAAQ,CAAC;MAAED,KAAK,EAALA;IAAM,CAAC,CAAC;EACrB,CAAC,EAAE,EAAE,CAAC;EAEN,IAAAgB,gBAAA,GAA4CpF,KAAK,CAACiE,QAAQ,CAAC,IAAI,CAAC;IAAAoB,gBAAA,GAAAlB,cAAA,CAAAiB,gBAAA;IAAzDE,cAAc,GAAAD,gBAAA;IAAEE,iBAAiB,GAAAF,gBAAA;EACxCrF,KAAK,CAACiF,SAAS,CAAC,YAAM;IACpBO,iBAAA,eAAAnP,mBAAA,GAAA6G,IAAA,CAAC,SAAAuI,QAAA;MAAA,IAAAC,UAAA;MAAA,OAAArP,mBAAA,GAAAyB,IAAA,UAAA6N,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAA7H,IAAA,GAAA6H,QAAA,CAAAnK,IAAA;UAAA;YACKiK,UAAU,GAAG,EAAE;YAAA,MACflC,MAAM,CAAChB,cAAc,KAAK,UAAU;cAAAoD,QAAA,CAAAnK,IAAA;cAAA;YAAA;YAAAmK,QAAA,CAAAnK,IAAA;YAAA,OACnBwE,YAAY,EAAE;UAAA;YAAjCyF,UAAU,GAAAE,QAAA,CAAA7K,IAAA;YAAA6K,QAAA,CAAAnK,IAAA;YAAA;UAAA;YACL,IAAI+H,MAAM,CAAChB,cAAc,KAAK,WAAW,EAAE;cAChDkD,UAAU,GAAGxF,gBAAgB,CAACsD,MAAM,CAACf,SAAS,CAAC;YACjD;UAAC;YACD8C,iBAAiB,CAAA9F,aAAA,CAAAA,aAAA,KACZ+D,MAAM;cACTkC,UAAU,EAAVA;YAAU,GACV;UAAC;UAAA;YAAA,OAAAE,QAAA,CAAA1H,IAAA;QAAA;MAAA,GAAAuH,OAAA;IAAA,CACJ,IAAG;EACN,CAAC,EAAE,CAACjC,MAAM,CAAC,CAAC;EAEZxD,KAAK,CAACiF,SAAS,CAAC,YAAM;IACpB,IAAIb,KAAK,IAAIkB,cAAc,EAAE;MAC3BlB,KAAK,CAACA,KAAK,CAACZ,MAAM,GAAG8B,cAAc;MACnC,OAAOO,MAAM,CAACzB,KAAK,CAACA,KAAK,CAAC;IAC5B;EACF,CAAC,EAAE,CAACA,KAAK,EAAEkB,cAAc,CAAC,CAAC;;EAE3B;EACA,IAAAQ,gBAAA,GAAqC9F,KAAK,CAACiE,QAAQ,CACjD5B,cAAc,CAACC,UAAU,CAC1B;IAAAyD,gBAAA,GAAA5B,cAAA,CAAA2B,gBAAA;IAFME,WAAW,GAAAD,gBAAA;IAAEE,aAAa,GAAAF,gBAAA;EAGjCzD,WAAU,GAAG0D,WAAW;EACxB,IAAAE,gBAAA,GAAmClG,KAAK,CAACiE,QAAQ,CAAC5B,cAAc,CAACE,SAAS,CAAC;IAAA4D,iBAAA,GAAAhC,cAAA,CAAA+B,gBAAA;IAApEE,UAAU,GAAAD,iBAAA;IAAEE,YAAY,GAAAF,iBAAA;EAC/B5D,SAAS,GAAG6D,UAAU;EAEtB,IAAME,WAAW,GAAG,SAAdA,WAAWA,CAAA,EAAS;IACxBL,aAAa,CAAC,CAAC,CAAC;IAChB7B,KAAK,CAACmC,IAAI,GAAG,IAAI;IACjB9B,SAAS,CAAC,CAAC,OAAO,CAAC,EAAE+B,IAAI,CAACC,GAAG,EAAE,CAAC;EAClC,CAAC;EAED,IAAAC,iBAAA,GAA8C1G,KAAK,CAACiE,QAAQ,CAC1Dd,MAAM,CAACwD,UAAU,GAAG,IAAI,CACzB;IAAAC,iBAAA,GAAAzC,cAAA,CAAAuC,iBAAA;IAFMG,eAAe,GAAAD,iBAAA;IAAEE,kBAAkB,GAAAF,iBAAA;EAI1C,IAAMG,aAAa,GAAG;IACpBvD,MAAM,EAANA,MAAM;IACNqB,WAAW,EAAXA,WAAW;IACXE,cAAc,EAAdA,cAAc;IACdN,SAAS,EAATA,SAAS;IACTG,SAAS,EAATA;EACF,CAAC;EACD,OACEoC,KAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACEN,KAAA;IACEO,SAAS,EAAC,4EAA4E;IACtFzD,GAAG,EAAEA,GAAI;IAAAmD,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,EACJ,EACPN,KAAA;IAAKO,SAAS,EAAC,yCAAyC;IAACC,EAAE,EAAC,MAAM;IAAAP,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,EAAO,EACzEN,KAAA;IAAKO,SAAS,EAAC,0CAA0C;IAACC,EAAE,EAAC,KAAK;IAAAP,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,EAAO,EACzEN,KAAA;IACEO,SAAS,EAAC,6DAA6D;IACvEC,EAAE,EAAC,OAAO;IAAAP,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,EACL,EACPN,KAAA;IAAKO,SAAS,EAAC,mCAAmC;IAAAN,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,cACrC,EAAAN,KAAA;IAAGS,IAAI,EAAC,sCAAsC;IAAAR,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,OAAK,CAAI,CAChE,EACLT,eAAe,GACdG,KAAA;IAAKO,SAAS,EAAC,kCAAkC;IAAAN,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAC/CN,KAAA,CAAC9F,qBAAqB;IAAA+F,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,YAErB,EAAAN,KAAA;IAAMO,SAAS,EAAC,QAAQ;IAAAN,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,EAAG,EAC3BN,KAAA,CAAC7F,cAAc;IAACuG,OAAO,EAAE,SAAAA,QAAA;MAAA,OAAMZ,kBAAkB,CAAC,KAAK,CAAC;IAAA,CAAC;IAAAG,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,MAE1D,CAAiB,CACK,EACxBN,KAAA,CAAChG,eAAe;IAAAiG,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACdN,KAAA,CAAC5F,WAAW;IAAA6F,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACVN,KAAA,CAAC3F,aAAa,EAAAsG,QAAA,KAAK9C,WAAW,CAAC,CAAC,gBAAgB,CAAC,CAAC;IAAAoC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,IAChDN,KAAA;IAAQhQ,KAAK,EAAC,UAAU;IAAAiQ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,iBAAe,CAAS,EACjDN,KAAA;IAAQhQ,KAAK,EAAC,WAAW;IAAAiQ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,WAAS,CAAS,CAC9B,EACf1C,SAAS,CAAC,CAAC,gBAAgB,CAAC,CAAC,KAAK,WAAW,IAC5CoC,KAAA,CAAC3F,aAAa;IACZkG,SAAS,EAAC,MAAM;IAChBvQ,KAAK,EAAEmJ,CAAC,CAACyH,SAAS,CAAC5F,iBAAiB,EAAE,UAAA6F,KAAA;MAAA,IAAG7Q,KAAK,GAAA6Q,KAAA,CAAL7Q,KAAK;MAAA,OAC5CmJ,CAAC,CAAC2H,OAAO,CAAC9Q,KAAK,EAAEwM,MAAM,CAACf,SAAS,CAAC;IAAA,EAClC;IACFqC,QAAQ,EAAE,SAAAA,SAACxB,CAAC;MAAA,OACVmB,SAAS,CACP,CAAC,WAAW,CAAC,EACbzC,iBAAiB,CAACsB,CAAC,CAAC5D,MAAM,CAAC1I,KAAK,CAAC,CAACA,KAAK,CACxC;IAAA,CACF;IAAAiQ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAEDN,KAAA;IAAQe,QAAQ;IAAC/Q,KAAK,EAAE,CAAC,CAAE;IAAAiQ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,oBAE5B,CAAS,EACRtF,iBAAiB,CAACgG,GAAG,CAAC,UAAAC,KAAA,EAAWC,KAAK;IAAA,IAAbjL,IAAI,GAAAgL,KAAA,CAAJhL,IAAI;IAAA,OAC5B+J,KAAA;MAAQhQ,KAAK,EAAEkR,KAAM;MAAAjB,MAAA,EAAApD,KAAA;MAAAqD,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GAAErK,IAAI,CAAU;EAAA,CACtC,CAAC,CAEL,CACW,EAEb2H,SAAS,CAAC,CAAC,gBAAgB,CAAC,CAAC,KAAK,WAAW,IAC5CoC,KAAA;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACG1C,SAAS,CAAC,CAAC,WAAW,CAAC,CAAC,CAACoD,GAAG,CAAC,UAACG,KAAK,EAAEC,UAAU,EAAEC,MAAM;IAAA,OACtDrB,KAAA;MAAKO,SAAS,EAAC,sCAAsC;MAAAN,MAAA,EAAApD,KAAA;MAAAqD,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GACnDN,KAAA;MAAKO,SAAS,EAAC,mBAAmB;MAAAN,MAAA,EAAApD,KAAA;MAAAqD,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GAChCN,KAAA;MAAAC,MAAA,EAAApD,KAAA;MAAAqD,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GAAQ,gBAAc,EAACc,UAAU,GAAG,CAAC,CAAU,EAC/CpB,KAAA;MAAAC,MAAA,EAAApD,KAAA;MAAAqD,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GACG,KAAK,EACLa,KAAK,CAAClG,aAAa,GAClBkG,KAAK,CAACjG,yBAAyB,EAAE,GAAG,EAAC,YAEzC,CAAO,EACP8E,KAAA;MAAMO,SAAS,EAAC,QAAQ;MAAAN,MAAA,EAAApD,KAAA;MAAAqD,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,EAAG,EAC1Be,MAAM,CAAC3L,MAAM,GAAG,CAAC,IAChBsK,KAAA,CAAC7F,cAAc;MACbuG,OAAO,EAAE,SAAAA,QAAA;QAAA,OACPjD,SAAS,CACP,CAAC,WAAW,CAAC,KAAA6D,MAAA,CAAAC,kBAAA,CAERF,MAAM,CAACpK,KAAK,CAAC,CAAC,EAAEmK,UAAU,CAAC,GAAAG,kBAAA,CAC3BF,MAAM,CAACpK,KAAK,CAACmK,UAAU,GAAG,CAAC,CAAC,GAElC;MAAA,CACF;MAAAnB,MAAA,EAAApD,KAAA;MAAAqD,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GACF,MAED,CACD,EACAc,UAAU,KAAKC,MAAM,CAAC3L,MAAM,GAAG,CAAC,IAC/BsK,KAAA,CAAC7F,cAAc;MACbuG,OAAO,EAAE,SAAAA,QAAA;QAAA,OACPjD,SAAS,CAAC,CAAC,WAAW,CAAC,KAAA6D,MAAA,CAAAC,kBAAA,CAAMF,MAAM,IAAEF,KAAK,GAAE;MAAA,CAC7C;MAAAlB,MAAA,EAAApD,KAAA;MAAAqD,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GACF,GAED,CACD,CACG,EACNN,KAAA,CAACnG,OAAO;MAAC2H,KAAK,EAAC,gBAAgB;MAAAvB,MAAA,EAAApD,KAAA;MAAAqD,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GAC7BN,KAAA,CAAClG,aAAa,EAAA6G,QAAA;MACZc,GAAG,EAAE,CAAE;MACPC,GAAG,EAAE;IAAI,GACL7D,WAAW,CAAC,CACd,WAAW,EACXuD,UAAU,EACV,eAAe,CAChB,CAAC;MAAAnB,MAAA,EAAApD,KAAA;MAAAqD,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GACF,CACM,EACVN,KAAA,CAACnG,OAAO;MAAC2H,KAAK,EAAC,sBAAsB;MAAAvB,MAAA,EAAApD,KAAA;MAAAqD,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GACnCN,KAAA,CAAClG,aAAa,EAAA6G,QAAA;MACZc,GAAG,EAAE,CAAE;MACPC,GAAG,EAAE;IAAI,GACL7D,WAAW,CAAC,CACd,WAAW,EACXuD,UAAU,EACV,2BAA2B,CAC5B,CAAC;MAAAnB,MAAA,EAAApD,KAAA;MAAAqD,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GACF,CACM,EACVN,KAAA,CAACnG,OAAO;MAAC2H,KAAK,EAAC,aAAa;MAAAvB,MAAA,EAAApD,KAAA;MAAAqD,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GAC1BN,KAAA,CAAClG,aAAa,EAAA6G,QAAA;MACZc,GAAG,EAAE,CAAE;MACPC,GAAG,EAAE;IAAI,GACL7D,WAAW,CAAC,CACd,WAAW,EACXuD,UAAU,EACV,aAAa,CACd,CAAC;MAAAnB,MAAA,EAAApD,KAAA;MAAAqD,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GACF,CACM,EACVN,KAAA,CAACnG,OAAO;MAAC2H,KAAK,EAAC,UAAU;MAAAvB,MAAA,EAAApD,KAAA;MAAAqD,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GACvBN,KAAA,CAAClG,aAAa,EAAA6G,QAAA;MACZc,GAAG,EAAE,CAAE;MACPC,GAAG,EAAE;IAAK,GACN7D,WAAW,CAAC,CAAC,WAAW,EAAEuD,UAAU,EAAE,UAAU,CAAC,CAAC;MAAAnB,MAAA,EAAApD,KAAA;MAAAqD,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GACtD,CACM,CACN;EAAA,CACP,CAAC,CAEL,EACDN,KAAA,CAACnG,OAAO;IAAC2H,KAAK,EAAC,eAAe;IAAAvB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAC5BN,KAAA,CAACjG,YAAY;IACX0H,GAAG,EAAE,CAAE;IACPC,GAAG,EAAE,EAAG;IACR1R,KAAK,EAAEuL,SAAU;IACjBuC,QAAQ,EAAE,SAAAA,SAACxB,CAAC;MAAA,OAAK+C,YAAY,CAAC/C,CAAC,CAAC5D,MAAM,CAAC1I,KAAK,CAAC;IAAA,CAAC;IAAAiQ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,EAC9C,EACFN,KAAA;IAAMO,SAAS,EAAC,MAAM;IAAAN,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAE/E,SAAS,EAAC,MAAC,CAAO,CAClC,CACM,EAClByE,KAAA,CAAC9F,qBAAqB;IAAA+F,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,MAAI,CAAwB,EACnDN,KAAA,CAAChG,eAAe;IAAAiG,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACdN,KAAA,CAAC5F,WAAW;IAAA6F,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACVN,KAAA,CAACjG,YAAY;IACX0H,GAAG,EAAE,CAAC,GAAI;IACVC,GAAG,EAAE,GAAI;IACT1R,KAAK,EAAEsL,WAAW;IAClBwC,QAAQ,EAAE,SAAAA,SAACxB,CAAC;MAAA,OAAK2C,aAAa,CAAC3C,CAAC,CAAC5D,MAAM,CAAC1I,KAAK,CAAC;IAAA,CAAC;IAAAiQ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,EAC/C,EACFN,KAAA;IAAMO,SAAS,EAAC,MAAM;IAAAN,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAEhF,WAAU,EAAC,MAAC,CAAO,EAC3C0E,KAAA;IAAMO,SAAS,EAAC,QAAQ;IAAAN,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,EAAG,EAC3BN,KAAA,CAAC7F,cAAc;IAACuG,OAAO,EAAEpB,WAAY;IAAAW,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,WAAS,CAAiB,CACpD,CACE,EAClBN,KAAA,CAAC9F,qBAAqB;IAAA+F,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,QAAM,CAAwB,EACpDvF,MAAM,CACJ1C,MAAM,CACL,UAACwD,KAAK;IAAA,OACJ,OAAOA,KAAK,CAAC8F,SAAS,KAAK,UAAU,IAAI9F,KAAK,CAAC8F,SAAS,CAACnF,MAAM,CAAC;EAAA,EACnE,CACAwE,GAAG,CAAC,UAACnF,KAAK;IAAA,OACTmE,KAAA,CAAC/F,oBAAoB;MACnB4B,KAAK,EAAEA,KAAM;MACbW,MAAM,EAAEA,MAAO;MACfiB,SAAS,EAAEA,SAAU;MAAAwC,MAAA,EAAApD,KAAA;MAAAqD,QAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAA,GAEpB,OAAOzE,KAAK,CAAC+F,cAAc,KAAK,UAAU,IACzC/F,KAAK,CAAC+F,cAAc,CAAC7B,aAAa,CAAC,CAChB;EAAA,CACxB,CAAC,CACA,GAENC,KAAA;IAAKO,SAAS,EAAC,kCAAkC;IAAAN,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAC/CN,KAAA,CAAC9F,qBAAqB;IAAA+F,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACpBN,KAAA,CAAC7F,cAAc;IAACuG,OAAO,EAAE,SAAAA,QAAA;MAAA,OAAMZ,kBAAkB,CAAC,IAAI,CAAC;IAAA,CAAC;IAAAG,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,UAEzD,CAAiB,CACK,CAE3B,CACG;AAEV;AAAC1D,EAAA,CArQuBD,MAAM;AAAAkF,EAAA,GAANlF,MAAM;AAuQ9B,SAASuB,IAAIA,CAAC4D,OAAO,EAAE;EACrB,IAAM1E,KAAK,GAAGxD,KAAK,EAAE;EAErBwD,KAAK,CAAC0E,OAAO,CAAC,CACXC,aAAa,CAAC,oDAAoD;EACnE;EACA;EAAA,CACCC,WAAW,CAAC;IAAEC,GAAG,EAAE,EAAE;IAAEC,GAAG,EAAE,CAAC,GAAG;IAAE/G,QAAQ,EAAE;EAAI,CAAC,EAAE,IAAI,CAAC,CACxDgH,iBAAiB,CAAC,UAACC,CAAC,EAAEC,WAAW,EAAK;IACrCjF,KAAK,CAACkF,MAAM,GAAGD,WAAW;IAC1B,IAAI3G,UAAU,CAAC0G,CAAC,CAACvQ,IAAI,CAAC,EAAE;MACtB,OAAO6J,UAAU,CAAC0G,CAAC,CAACvQ,IAAI,CAAC,CAACP,MAAM,CAAC8L,KAAK,EAAEgF,CAAC,EAAEC,WAAW,CAAC;IACzD,CAAC,MAAM;MACLE,OAAO,CAACC,IAAI,CAAC,cAAc,EAAEJ,CAAC,CAACvQ,IAAI,CAAC;IACtC;EACF,CAAC,CAAC,CACD4Q,uBAAuB,CAAC,UAAC5S,GAAG,EAAEuS,CAAC,EAAEC,WAAW,EAAK;IAChDjF,KAAK,CAACkF,MAAM,GAAGD,WAAW;IAC1B,IAAI3G,UAAU,CAAC0G,CAAC,CAACvQ,IAAI,CAAC,EAAE;MACtB,OAAO6J,UAAU,CAAC0G,CAAC,CAACvQ,IAAI,CAAC,CAACgN,MAAM,CAACzB,KAAK,EAAEgF,CAAC,EAAEvS,GAAG,EAAEwS,WAAW,CAAC;IAC9D;EACF,CAAC,CAAC;EAEJ,OAAOjF,KAAK;AACd;AAEA,SAASyB,MAAMA,CAACzB,KAAK,EAAE;EACrB,IAAQZ,MAAM,GAAKY,KAAK,CAAhBZ,MAAM;EACd,IAAQkC,UAAU,GAAKlC,MAAM,CAArBkC,UAAU;EAElBtB,KAAK,CAACsB,UAAU,GAAGA,UAAU;EAE7B,IAAMgE,UAAU,GAAGlG,MAAM,CAACzB,MAAM,CAAC4H,QAAQ,CAACD,UAAU;EAEpD,IAAME,sBAAsB,GAC1BpG,MAAM,CAACzB,MAAM,CAAC4H,QAAQ,CAACE,OAAO,IAAIrG,MAAM,CAACzB,MAAM,CAAC4H,QAAQ,CAAC9Q,IAAI,KAAK,SAAS;EAC7E,IAAMiR,cAAc,GAAGtG,MAAM,CAACzB,MAAM,CAACgI,OAAO,CAACF,OAAO;EACpD,IAAMG,oBAAoB,GAAGxG,MAAM,CAACzB,MAAM,CAACgI,OAAO,CAACE,eAAe;EAClE,IAAMC,YAAY,GAAG1G,MAAM,CAACzB,MAAM,CAACoI,KAAK,CAACN,OAAO;EAEhD,IAAIO,aAAa;EACjB,IAAIR,sBAAsB,EAAE;IAC1BxF,KAAK,CAACiG,KAAK,GAAG7J,qBAAqB,CAACkJ,UAAU,CAAC;IAC/CtF,KAAK,CAACuF,QAAQ,GAAGlJ,eAAe,CAAC;MAAEiJ,UAAU,EAAVA,UAAU;MAAEhE,UAAU,EAAVA;IAAW,CAAC,CAAC;IAC5D0E,aAAa,GAAGzJ,YAAY,CAACyD,KAAK,CAACiG,KAAK,CAAC;EAC3C;EAEAjG,KAAK,CAACkG,UAAU,GAAG,EAAE;EACrB,IAAIJ,YAAY,IAAKJ,cAAc,IAAIE,oBAAqB,EAAE;IAC5D5F,KAAK,CAACkG,UAAU,GAAG9I,uBAAuB,CAACkE,UAAU,EAAElC,MAAM,CAACzB,MAAM,CAACoI,KAAK,CAAC;EAC7E;EAEA/F,KAAK,CAACmG,QAAQ,GAAG5I,WAAW,CAAC6B,MAAM,CAACzB,MAAM,CAACyI,OAAO,CAAC;EACnDpG,KAAK,CAACqG,aAAa,GAAG7I,gBAAgB,CAACwC,KAAK,CAACmG,QAAQ,CAAC;EAEtD,IAAMG,aAAa,GAAG3I,MAAM,CAAC1C,MAAM,CACjC,UAACwD,KAAK;IAAA,OAAKW,MAAM,CAACzB,MAAM,CAACc,KAAK,CAAC/L,GAAG,CAAC,CAAC+S,OAAO;EAAA,EAC5C;EAED,IAAMc,eAAe,GAAGD,aAAa,CAACE,OAAO,CAAC,UAAC/H,KAAK;IAAA,OAClDA,KAAK,CAACgI,OAAO,CAACzG,KAAK,CAAC;EAAA,EACrB;EAEDA,KAAK,CAACuG,eAAe,CAACA,eAAe,CAAC;EAEtC,IAAIG,KAAK,GAAG,CAAC;EACb,IAAIC,IAAI;EACR,IAAIC,MAAM;EACV,IAAIC,SAAS,GAAG,IAAI;EACpB,SAASpF,MAAMA,CAACU,IAAI,EAAE;IACpBuE,KAAK,EAAE;IAEP1G,KAAK,CAACZ,MAAM,CAACjB,SAAS,GAAGA,SAAS;IAElC,IAAM2I,SAAS,GAAG3K,qBAAqB,CAACmF,UAAU,EAAEa,IAAI,EAAE;MACxDhE,SAAS,EAAE6B,KAAK,CAACZ,MAAM,CAACjB;IAC1B,CAAC,CAAC;IAEF6B,KAAK,CAAC8G,SAAS,GAAGA,SAAS;IAC3B9G,KAAK,CAACmC,IAAI,GAAGA,IAAI;IAEjB,IAAI4E,gBAAgB,EAAEC,gBAAgB;IACtC,IAAIxB,sBAAsB,IAAIE,cAAc,EAAE;MAAA,IAAAuB,qBAAA,GACF3K,uBAAuB,CAAC;QAChE6B,SAAS,EAAE6B,KAAK,CAACZ,MAAM,CAACjB,SAAS;QACjCmH,UAAU,EAAVA,UAAU;QACVwB,SAAS,EAATA;MACF,CAAC,CAAC;MAJCC,gBAAgB,GAAAE,qBAAA,CAAhBF,gBAAgB;MAAEC,gBAAgB,GAAAC,qBAAA,CAAhBD,gBAAgB;IAKvC;IAEAhH,KAAK,CAACuF,QAAQ,GAAG,CAAC,CAAC;IACnB,IAAIC,sBAAsB,EAAE;MAC1B,SAAA0B,GAAA,MAAAC,YAAA,GAAmB/U,MAAM,CAACiH,IAAI,CAAC2M,aAAa,CAAC,EAAAkB,GAAA,GAAAC,YAAA,CAAA7O,MAAA,EAAA4O,GAAA,IAAE;QAA1C,IAAME,IAAI,GAAAD,YAAA,CAAAD,GAAA;QACblB,aAAa,CAACoB,IAAI,CAAC,IAAIL,gBAAgB,CAACK,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC;QACrDpH,KAAK,CAACuF,QAAQ,CAAC6B,IAAI,CAAC,GAAGpB,aAAa,CAACoB,IAAI,CAAC,GAAGV,KAAK;MACpD;IACF;IAEA1G,KAAK,CAACqH,KAAK,GAAG,IAAI;IAClBC,QAAQ,CAACC,cAAc,CAAC,OAAO,CAAC,CAACC,WAAW,GAAG,EAAE;IACjD,IAAI9B,cAAc,EAAE;MAClB,IAAA+B,qBAAA,GAKIzH,KAAK,CAACZ,MAAM,CAACzB,MAAM,CAACgI,OAAO;QAJ7B+B,MAAM,GAAAD,qBAAA,CAANC,MAAM;QACNC,MAAM,GAAAF,qBAAA,CAANE,MAAM;QACN9B,eAAe,GAAA4B,qBAAA,CAAf5B,eAAe;QACf+B,YAAY,GAAAH,qBAAA,CAAZG,YAAY;MAEd,IAAIC,KAAK,GAAG,EAAE;MACd,IAAIhC,eAAe,EAAE;QACnBgC,KAAK,CAAC9P,IAAI,CAAAqD,KAAA,CAAVyM,KAAK,EAAA1D,kBAAA,CAASnE,KAAK,CAACkG,UAAU,EAAC;MACjC;MACA,IAAI4B,MAAM,GAAG,EAAE;MACf,IAAIF,YAAY,EAAE;QAChBE,MAAM,CAAC/P,IAAI,CAAAqD,KAAA,CAAX0M,MAAM,EAAA3D,kBAAA,CAASnE,KAAK,CAACmG,QAAQ,CAACvC,GAAG,CAAC,UAACmE,CAAC;UAAA,OAAKA,CAAC,CAACC,QAAQ;QAAA,EAAC,EAAC;MACvD;MAEA,IAAI;QACFhI,KAAK,CAACqH,KAAK,GAAG3J,mBAAmB,CAACgK,MAAM,EAAEC,MAAM,EAAEb,SAAS,EAAE;UAC3De,KAAK,EAALA,KAAK;UACLC,MAAM,EAANA,MAAM;UACNf,gBAAgB,EAAhBA,gBAAgB;UAChBzB,UAAU,EAAVA;QACF,CAAC,CAAC;QACFgC,QAAQ,CAACC,cAAc,CACrB,OAAO,CACR,CAACC,WAAW,sBAAAtD,MAAA,CAAsB+D,IAAI,CAACC,KAAK,CAC3ClI,KAAK,CAACqH,KAAK,CAACc,QAAQ,CACrB,2BAAAjE,MAAA,CAAwB+D,IAAI,CAACC,KAAK,CAAClI,KAAK,CAACqH,KAAK,CAACe,OAAO,CAAC,QAAK;MAC/D,CAAC,CAAC,OAAOlJ,CAAC,EAAE;QACVoI,QAAQ,CAACC,cAAc,CAAC,OAAO,CAAC,CAACC,WAAW,GAAG,aAAa;MAC9D;IACF;IAAC,IAAAa,SAAA,GAAAC,0BAAA,CAEkB/B,eAAe;MAAAgC,KAAA;IAAA;MAAlC,KAAAF,SAAA,CAAAG,CAAA,MAAAD,KAAA,GAAAF,SAAA,CAAAI,CAAA,IAAA1R,IAAA,GAAoC;QAAA,IAAzB2R,IAAI,GAAAH,KAAA,CAAA3V,KAAA;QACb,IAAI8V,IAAI,CAACC,cAAc,IAAI,IAAI,EAAE;UAC/BD,IAAI,CAACV,QAAQ,GAAGlB,SAAS,CAAC4B,IAAI,CAACC,cAAc,CAAC;QAChD;QACA,IAAID,IAAI,CAACE,gBAAgB,EAAE;UACzBF,IAAI,CAAC5B,SAAS,GAAG4B,IAAI,CAACE,gBAAgB,CAAChF,GAAG,CAAC,UAACE,KAAK;YAAA,OAAKgD,SAAS,CAAChD,KAAK,CAAC;UAAA,EAAC;QACzE;MACF;IAAC,SAAArQ,GAAA;MAAA4U,SAAA,CAAAnJ,CAAA,CAAAzL,GAAA;IAAA;MAAA4U,SAAA,CAAAQ,CAAA;IAAA;IACD7I,KAAK,CAACuG,eAAe,CAACA,eAAe,CAAC;IAEtC,IAAMlE,GAAG,GAAGD,IAAI,CAACC,GAAG,EAAE;IACtB,IAAIsE,IAAI,IAAI,IAAI,EAAE;MAChB,IAAMmC,GAAG,GAAG,CAAC,IAAI,CAACzG,GAAG,GAAGsE,IAAI,IAAI,IAAI,CAAC;MACrCC,MAAM,GAAG,CAACA,MAAM,IAAIkC,GAAG,IAAIjC,SAAS,GAAGiC,GAAG,IAAI,GAAG,GAAGjC,SAAS,CAAC;MAC9DS,QAAQ,CAACC,cAAc,CAAC,KAAK,CAAC,CAACC,WAAW,GAAGZ,MAAM,CAACmC,OAAO,CAAC,CAAC,CAAC,GAAG,MAAM;IACzE;IACApC,IAAI,GAAGtE,GAAG;IAEViF,QAAQ,CAACC,cAAc,CAAC,MAAM,CAAC,CAACC,WAAW,GAAGwB,MAAM,CAAC7G,IAAI,CAAC,CAAC8G,OAAO,CAChE,OAAO,EACP,EAAE,CACH;EACH;EAEA,OAAO/M,UAAU,CAACuF,MAAM,EAAE;IACxB;IACAvD,UAAU,EAAE,SAAAA,WAAA;MAAA,OAAMA,WAAU;IAAA;IAC5BgL,QAAQ,EAAE;EACZ,CAAC,CAAC;AACJ;AAAC,IAAAzE,EAAA;AAAA0E,YAAA,CAAA1E,EAAA"},"metadata":{},"sourceType":"module"}